// Character biographies for the pre-made options
const characterBios = {
  "emma": {
    "name": "Emma Chen",
    "gender": "Female",
    "age": "28",
    "ethnicity": "Chinese American",
    "sexual_orientation": "Straight",
    "relationship_goal": "Serious Relationship",
    "body_type": "Athletic",
    "hair_color": "Black",
    "hair_style": "Long and Straight",
    "clothing": "Business Casual - Blazer",
    "personality": "Confident and Outgoing",
    "occupation": "Tech CEO",
    "current_situation": "Career-focused",
    "environment": "Upscale Restaurant",
    "encounter_context": "Professional Consultation",
    "bio": "# Emma Chen\n\nEmma Chen is a 28-year-old tech CEO who has taken Silicon Valley by storm with her innovative AI startup. With her confident demeanor and sharp intelligence, she commands respect in every room she enters.\n\n## Personal Information\n- Age: 28\n- Birthplace: San Francisco, California\n- Education: Stanford University (Computer Science)\n- Current Residence: Modern penthouse apartment in San Francisco\n\n## Background & History\nBorn to immigrant parents who worked in tech, Emma was coding by age 10. She founded her first startup at 22 right after graduating Stanford, and after a successful acquisition, launched her current company which focuses on ethical AI solutions. Her meteoric rise earned her a spot on Forbes 30 Under 30 last year.\n\n## Personality\nEmma is confident, ambitious, and decisive in her professional life, but those who get close discover her playful, adventurous side. She has a quick wit and enjoys intellectual sparring. While she appears completely self-assured in public, she occasionally questions if she's missing out on deeper personal connections due to her intense focus on her career.\n\n## Current Life\nAs CEO of TechFusion AI, Emma works long hours but makes time for tennis, hiking, and occasional weekend getaways. She's recently started to prioritize more work-life balance after realizing success feels incomplete without someone to share it with. Her daily routine includes early morning workouts, back-to-back meetings, and late nights reviewing code or strategy documents.\n\n## Appearance\nEmma has long, straight black hair that she often wears in a sleek ponytail for work. She's athletic from her regular tennis matches and morning runs. Her wardrobe consists primarily of tailored blazers, designer dresses, and the occasional tech company hoodie when working late. She carries herself with poise and maintains excellent posture—a habit from her childhood dance lessons.\n\n## Interests & Hobbies\n- Competitive tennis\n- Mountain hiking\n- Fine wine tasting\n- Reading biographies of innovative leaders\n- Attending symphony performances\n\n## Relationship Status\nEmma has been single for the past two years, with her last relationship ending when her ex-boyfriend couldn't understand her dedication to her company. Meeting you has caught her interest—she's intrigued by someone who seems to understand both her drive and her desire for connection beyond the boardroom."
  },
  "scarlett": {
    "name": "Scarlett Winters",
    "gender": "Female",
    "age": "32",
    "ethnicity": "Caucasian",
    "sexual_orientation": "Bisexual",
    "relationship_goal": "Taking Things Slow",
    "body_type": "Hourglass Figure",
    "hair_color": "Red",
    "hair_style": "Long and Wavy",
    "clothing": "Cocktail Dress",
    "personality": "Mysterious and Intriguing",
    "occupation": "Actress",
    "current_situation": "Between Projects",
    "environment": "Hotel Lobby",
    "encounter_context": "Chance Meeting While Traveling",
    "bio": "# Scarlett Winters\n\nScarlett Winters is an acclaimed 32-year-old actress known for her versatile performances and captivating screen presence. With fiery red hair and an enigmatic personality, she brings an air of mystery to every encounter.\n\n## Personal Information\n- Age: 32\n- Birthplace: Boston, Massachusetts\n- Education: Juilliard School of Drama\n- Current Residence: West Hollywood home and various temporary locations while filming\n\n## Background & History\nScarlett began her career in theater before transitioning to independent films where she gained critical acclaim. Her breakthrough role in the psychological thriller \"Crimson Shadows\" earned her an Academy Award nomination and catapulted her to fame. Despite her success, she's maintained a relatively private personal life, appearing selectively at industry events and avoiding the typical Hollywood party scene.\n\n## Personality\nScarlett possesses a captivating combination of confidence and vulnerability. She's thoughtful and observant, often preferring to listen before speaking. Her mysterious aura isn't an act—she genuinely values depth and authenticity in relationships. While she can charm a room when necessary, she's most comfortable in intimate conversations where she can be her unguarded self.\n\n## Current Life\nCurrently between film projects, Scarlett is taking time to travel and read scripts that challenge her artistically. She's grown somewhat weary of the superficial aspects of Hollywood and finds herself seeking more meaningful connections. Her schedule alternates between intensely busy filming periods and breaks where she can pursue other interests and reconnect with herself.\n\n## Appearance\nScarlett has naturally wavy red hair that falls past her shoulders, pale skin with a few freckles, and expressive green eyes. Her hourglass figure is the result of both genetics and the dance training she maintains for film roles. Her style is elegant with a vintage flair—she often wears classic silhouettes that evoke old Hollywood glamour.\n\n## Interests & Hobbies\n- Film history and classic cinema\n- Photography (analog film cameras)\n- Ballet and contemporary dance\n- Collecting first-edition books\n- International travel to locations off the tourist path\n\n## Relationship Status\nScarlett has had several high-profile relationships that ended due to the challenges of her career and the public scrutiny they faced. She's been single for almost a year, taking time to rediscover what she truly wants in a partner. Meeting you has sparked her interest—she appreciates that you seem to see beyond her public persona and connect with the woman behind the roles she plays."
  },
  "zendaya": {
    "name": "Zara Malik",
    "gender": "Female",
    "age": "26",
    "ethnicity": "Mixed Race",
    "sexual_orientation": "Straight",
    "relationship_goal": "Open to Anything",
    "body_type": "Slender",
    "hair_color": "Black",
    "hair_style": "Natural Curls",
    "clothing": "Avant-garde Fashion",
    "personality": "Creative and Artistic",
    "occupation": "Fashion Designer",
    "current_situation": "Career Transition",
    "environment": "Art Gallery Opening",
    "encounter_context": "Shared Hobby/Class",
    "bio": "# Zara Malik\n\nZara Malik is a 26-year-old rising fashion designer known for her bold, culturally-infused designs that challenge industry norms. With her natural confidence and artistic vision, she's becoming a notable name in the fashion world.\n\n## Personal Information\n- Age: 26\n- Birthplace: London, England\n- Education: Central Saint Martins (Fashion Design)\n- Current Residence: Converted industrial loft in New York's fashion district\n\n## Background & History\nBorn to a British mother and Pakistani father, Zara grew up with influences from both cultures. She showed artistic talent early, redesigning her clothes since childhood. After graduating from one of London's prestigious fashion schools, she worked for major design houses before launching her independent label last year. Her debut collection received significant attention for its innovative approach to sustainable luxury.\n\n## Personality\nZara is creative, passionate, and unapologetically authentic. She has a natural warmth that draws people in, coupled with a determination that helps her overcome industry challenges. While confident in her artistic vision, she sometimes struggles with the business aspects of her career. She's reflective and empathetic, often finding inspiration in the stories and struggles of others.\n\n## Current Life\nCurrently in a career transition, Zara is expanding her brand from custom designs to a limited ready-to-wear collection. She divides her time between her studio, sourcing ethical materials, and networking events. She's working toward her first major Fashion Week presentation while navigating the challenges of being an independent designer in a competitive industry.\n\n## Appearance\nZara has a slender, graceful frame and moves with natural elegance. Her black hair falls in natural curls that she proudly wears as a statement against fashion's often Eurocentric beauty standards. Her warm brown skin glows from her disciplined skincare routine. Her personal style is a perfect example of her design philosophy—unexpected combinations of structural elements with flowing fabrics, often incorporating subtle nods to her South Asian heritage.\n\n## Interests & Hobbies\n- Textile art and fabric dyeing techniques\n- Cultural anthropology and costume history\n- Street photography for design inspiration\n- Yoga and meditation\n- Cooking fusion dishes that blend her dual heritage\n\n## Relationship Status\nZara's intense focus on launching her brand has left little time for serious relationships in recent years. She's had a few short-term connections but found they often couldn't understand her unpredictable schedule and creative process. Upon meeting you, she's intrigued by your perspective and the easy conversation between you—a welcome respite from the transactional relationships common in her industry."
  },
  "natalie": {
    "name": "Natalia Petrova",
    "gender": "Female",
    "age": "34",
    "ethnicity": "Russian",
    "sexual_orientation": "Straight",
    "relationship_goal": "Serious Relationship",
    "body_type": "Athletic",
    "hair_color": "Dark Brown",
    "hair_style": "Medium Length",
    "clothing": "Smart Casual",
    "personality": "Intellectual and Analytical",
    "occupation": "International Journalist",
    "current_situation": "Recently Moved",
    "environment": "Cozy Bookstore Cafe",
    "encounter_context": "Chance Meeting",
    "bio": "# Natalia Petrova\n\nNatalia Petrova is a 34-year-old international journalist known for her insightful coverage of global politics and humanitarian issues. With her sharp intellect and worldly perspective, she brings depth and nuance to every conversation.\n\n## Personal Information\n- Age: 34\n- Birthplace: St. Petersburg, Russia\n- Education: Moscow State University (Political Science), Columbia School of Journalism\n- Current Residence: Recently settled apartment in your city after years abroad\n\n## Background & History\nNatalia grew up in post-Soviet Russia, which sparked her interest in political systems and social change. After studying in Moscow and New York, she built her career reporting from conflict zones and political hotspots across Eastern Europe, the Middle East, and Africa. Her award-winning coverage of refugee crises has been featured in major international publications. After ten years of constant travel, she's recently accepted a position that allows her to be based in one location while still covering international stories.\n\n## Personality\nNatalia is thoughtful, analytical, and deeply empathetic despite her sometimes reserved exterior. Years of journalism have made her an excellent listener with an ability to ask just the right questions. She has a dry wit that emerges once she's comfortable. While intellectually confident, she can be more guarded with her emotions—a protective habit developed from witnessing human vulnerability in difficult circumstances around the world.\n\n## Current Life\nHaving recently moved to establish a more permanent home base, Natalia is adjusting to a less nomadic lifestyle. She still travels for important stories but is learning to appreciate routine and community. She's setting up her apartment, exploring local haunts, and embracing small pleasures that weren't possible during her constantly mobile years. Her work remains demanding, often involving late nights researching or conducting interviews across time zones.\n\n## Appearance\nNatalia has an athletic build from years of navigating challenging terrain on assignment and maintaining running as her constant across different countries. Her dark brown hair falls to her shoulders, often tucked behind her ears when she's concentrating. Her hazel eyes reflect both intensity and warmth. Her style is practical but elegant—well-crafted basics that travel well, with the occasional statement piece collected from her global assignments.\n\n## Interests & Hobbies\n- Political literature and international relations theory\n- Documentary photography\n- Distance running\n- Languages (fluent in Russian, English, and Arabic; conversational in French)\n- Exploring local markets and food cultures\n\n## Relationship Status\nNatalia's career has made long-term relationships challenging. Her last serious relationship ended two years ago when the geographic distance became unsustainable. Now that she's establishing a more stable base, she's cautiously open to building a meaningful connection. Meeting you has caught her interest—she appreciates your perspective and finds herself curious to learn more about your life and experiences."
  },
  "henry": {
    "name": "Henry Fielding",
    "gender": "Male",
    "age": "31",
    "ethnicity": "Black/African American",
    "sexual_orientation": "Straight",
    "relationship_goal": "Serious Relationship",
    "body_type": "Athletic",
    "hair_color": "Black",
    "hair_style": "Short and Styled",
    "clothing": "Smart Casual",
    "personality": "Confident and Outgoing",
    "occupation": "Fitness Entrepreneur",
    "current_situation": "Business Expansion",
    "environment": "Upscale Gym",
    "encounter_context": "Fitness Class",
    "bio": "# Henry Fielding\n\nHenry Fielding is a 31-year-old fitness entrepreneur who has successfully transformed his passion for wellness into a growing business empire. With his magnetic personality and genuine desire to help others, he inspires everyone around him.\n\n## Personal Information\n- Age: 31\n- Birthplace: Philadelphia, Pennsylvania\n- Education: Penn State University (Business Administration with minor in Nutrition Science)\n- Current Residence: Modern condo in the city's vibrant downtown district\n\n## Background & History\nRaised by parents who emphasized both education and athletics, Henry excelled in college sports while building a strong academic foundation. After graduation, he rejected corporate job offers to pursue his passion, starting as a personal trainer. Five years ago, he launched his own boutique fitness studio combining high-intensity training with holistic wellness approaches. His innovative concept quickly gained popularity, and he's now preparing to open his third location while expanding his branded supplement line.\n\n## Personality\nHenry is naturally charismatic, exuding confidence that never crosses into arrogance. He's genuinely interested in people and remembers small details about everyone he meets. His infectious enthusiasm and positive outlook make challenges seem conquerable. While he presents a strong, motivated exterior, close friends know he sometimes questions whether his success is meaningful enough beyond the commercial aspects.\n\n## Current Life\nCurrently focused on expanding his fitness brand, Henry balances hands-on training with the growing business responsibilities of his enterprise. He starts each day with his own workout before dawn, then divides time between client sessions, business development, and community outreach programs he's passionate about. Despite his busy schedule, he's making a conscious effort to create space for personal relationships after realizing business success alone doesn't provide complete fulfillment.\n\n## Appearance\nHenry has an athletic, well-maintained physique that reflects his commitment to fitness as both profession and lifestyle. His short black hair is always perfectly styled, complementing his well-groomed appearance. His wardrobe consists of tailored casual wear that transitions easily from business meetings to training sessions. His most striking feature is his genuine smile that immediately puts people at ease.\n\n## Interests & Hobbies\n- Rock climbing and outdoor adventure sports\n- Reading business and personal development books\n- Cooking nutritious, innovative meals\n- Mentoring youth from underserved communities\n- Jazz music and occasional saxophone playing (a childhood hobby he's rekindling)\n\n## Relationship Status\nHenry has had several relationships that ended due to his demanding schedule and single-minded focus on building his business. After two years of casual dating, he's realized he wants something more meaningful and is ready to make space for the right person. Meeting you has sparked his interest—he appreciates your energy and perspective, finding himself thinking about you even during his normally focused workday."
  },
  "chris": {
    "name": "Christopher Reynolds",
    "gender": "Male",
    "age": "35",
    "ethnicity": "British",
    "sexual_orientation": "Straight",
    "relationship_goal": "Taking Things Slow",
    "body_type": "Athletic",
    "hair_color": "Dark Blonde",
    "hair_style": "Medium Length",
    "clothing": "Casual - Henley & Jeans",
    "personality": "Thoughtful and Analytical",
    "occupation": "Marine Biologist",
    "current_situation": "Research Project",
    "environment": "Oceanfront Research Center",
    "encounter_context": "Chance Meeting",
    "bio": "# Christopher Reynolds\n\nChristopher (Chris) Reynolds is a 35-year-old marine biologist whose work studying ocean ecosystems has taken him to the world's most remote coastlines. With his thoughtful demeanor and passion for conservation, he brings depth and purpose to his interactions.\n\n## Personal Information\n- Age: 35\n- Birthplace: Brighton, England\n- Education: University of Southampton (Marine Biology), Ph.D. from Scripps Institution of Oceanography\n- Current Residence: Coastal cottage near his current research station\n\n## Background & History\nChris grew up along the English coastline, developing an early fascination with marine life. After completing his education with honors, he built his reputation through groundbreaking research on coral reef restoration. He's spent the last decade leading international conservation projects, with his work featured in prestigious scientific journals and environmental documentaries. Recently, he received a major grant to head a three-year study on sustainable coastal ecosystems.\n\n## Personality\nChris is thoughtful and analytical, often taking time to process before speaking. This contemplative nature masks a passionate commitment to his work and deeply held values. He has a subtle, intelligent humor that emerges when he's comfortable. While he can command attention when presenting his research, he's naturally more reserved in social settings, preferring meaningful conversation to small talk.\n\n## Current Life\nCurrently leading a significant research project, Chris divides his time between field work, laboratory analysis, and writing. His typical day might include diving to collect samples, working with his research team, or collaborating with local conservation groups. After years of constant travel, he's appreciating the relative stability of his current project location, which allows him to develop relationships beyond his professional circle.\n\n## Appearance\nChris has an athletic build maintained by regular swimming and diving. His medium-length dark blonde hair often appears lighter from sun exposure, and he typically wears it casually styled or pushed back when working. His tan reflects countless hours spent outdoors, and fine lines around his eyes speak to years squinting at the ocean horizon. His style is practical and unfussy—quality basics that transition well from research stations to casual meetings.\n\n## Interests & Hobbies\n- Underwater photography\n- Sailing and kayaking\n- Environmental literature and philosophy\n- Acoustic guitar playing\n- Collecting rare books on maritime history\n\n## Relationship Status\nChris's demanding career and frequent relocations have made sustaining relationships challenging. His last serious relationship ended amicably two years ago when their career paths diverged to different continents. He's been focused on his work since then, but his more settled position has him open to connection again. Meeting you has genuinely caught his interest—he finds your perspective refreshing and feels an unexpected ease in your company that has him reconsidering his solitary habits."
  }
};

// Function to update the bio text area when a predefined bio is selected
function updateBioText() {
  const bioSelect = document.getElementById('predefinedBios');
  const bioTextArea = document.getElementById('bioTextArea');
  const bioText = document.getElementById('bioText');
  const bioPreview = document.getElementById('bioPreview');
  
  if (!bioSelect || !bioTextArea || !bioText) return;
  
  const selectedBio = bioSelect.value;
  
  if (selectedBio && characterBios[selectedBio]) {
    const bio = characterBios[selectedBio];
    
    // Set the text in the textarea and hidden input
    bioTextArea.value = bio.bio;
    bioText.value = bio.bio;
    
    // Update the preview div
    if (bioPreview) {
      bioPreview.textContent = bio.bio;
    }
    
    // Make sure the premade bio section is visible
    const premadeBioSection = document.getElementById('premadeBioSection');
    if (premadeBioSection) {
      premadeBioSection.style.display = 'block';
    }
    
    // Auto-fill the form fields based on the selected bio
    fillFormFields(selectedBio);
  } else {
    bioTextArea.value = '';
    bioText.value = '';
    if (bioPreview) {
      bioPreview.textContent = '';
    }
  }
}

// Function to fill form fields based on the selected bio
function fillFormFields(bioKey) {
  const character = characterBios[bioKey];
  if (!character) return;

  // Get all the form elements we need to fill
  const formFields = {
    // NPC basic info
    "npc_name": character.name,
    "npc_gender": character.gender,
    "npc_age": character.age,
    "npc_ethnicity": character.ethnicity,
    "npc_sexual_orientation": character.sexual_orientation,
    "npc_relationship_goal": character.relationship_goal,

    // Appearance
    "npc_body_type": character.body_type,
    "npc_hair_color": character.hair_color,
    "npc_hair_style": character.hair_style,
    "npc_clothing": character.clothing,

    // Personality & Situation
    "npc_personality": character.personality,
    "npc_occupation": character.occupation,
    "npc_current_situation": character.current_situation,

    // Environment
    "environment": character.environment,
    "encounter_context": character.encounter_context
  };

  // Fill dropdown fields
  for (const fieldName in formFields) {
    const value = formFields[fieldName];
    if (!value) continue;

    // First try to set the dropdown value
    const dropdown = document.querySelector(`select[name="${fieldName}"]`);
    if (dropdown) {
      // Look for an exact match first
      let matchFound = false;
      for (let i = 0; i < dropdown.options.length; i++) {
        if (dropdown.options[i].value === value) {
          dropdown.selectedIndex = i;
          matchFound = true;
          break;
        }
      }

      // If no exact match, try a partial match (case insensitive)
      if (!matchFound) {
        const lowerValue = value.toLowerCase();
        for (let i = 0; i < dropdown.options.length; i++) {
          if (dropdown.options[i].value.toLowerCase().includes(lowerValue)) {
            dropdown.selectedIndex = i;
            matchFound = true;
            break;
          }
        }
      }

      // If still no match, use the custom field
      if (!matchFound) {
        const customField = document.querySelector(`input[name="${fieldName}_custom"]`);
        if (customField) {
          customField.value = value;
        }
      }
    } else {
      // If dropdown not found, try direct input field
      const inputField = document.querySelector(`input[name="${fieldName}"]`);
      if (inputField) {
        inputField.value = value;
      }

      // Also check for custom fields
      const customField = document.querySelector(`input[name="${fieldName}_custom"]`);
      if (customField) {
        customField.value = value;
      }
    }
  }
}

// Function to show the premade bio section
function showPremadeBio() {
  document.getElementById('premadeBioSection').style.display = 'block';
  document.getElementById('manualCustomizationSection').style.display = 'none';

  // Ensure the textarea shows the currently selected bio
  updateBioText();
}

// Function to show the manual customization section
function showManualCustomization() {
  document.getElementById('premadeBioSection').style.display = 'none';
  document.getElementById('manualCustomizationSection').style.display = 'block';
}

// Initialize when the document loads
document.addEventListener('DOMContentLoaded', function() {
    // Set up event listener for the bio selection
    const bioSelect = document.getElementById('predefinedBios');
    if (bioSelect) {
        bioSelect.addEventListener('change', updateBioText);
    }
    
    // Set up event listener for the textarea to update the hidden input
    const bioTextArea = document.getElementById('bioTextArea');
    const bioText = document.getElementById('bioText');
    if (bioTextArea && bioText) {
        bioTextArea.addEventListener('input', function() {
            bioText.value = bioTextArea.value;
        });
    }
});
// Character biography templates
const characterBios = {
  "emma": {
    name: "Emma Chen",
    gender: "Female",
    age: "28",
    ethnicity: "Chinese American",
    sexual_orientation: "Straight",
    relationship_goal: "Serious Relationship",
    body_type: "Athletic",
    hair_color: "Black",
    hair_style: "Long and Straight",
    clothing: "Business Attire - Suit",
    personality: "Confident and Outgoing",
    occupation: "Tech CEO",
    current_situation: "Career-focused",
    environment: "Upscale Restaurant",
    encounter_context: "Business Meeting",
    bio: `# Emma Chen

Emma is a 28-year-old Chinese American tech CEO with a commanding presence and brilliant mind. Her sleek black hair falls straight down her back, and her athletic build speaks to her disciplined approach to both fitness and business.

## Personal Information
- **Age:** 28
- **Ethnicity:** Chinese American
- **Occupation:** Tech CEO & Founder of NexGen Solutions
- **Education:** MIT graduate (Computer Science & Business)
- **Current Residence:** Luxury high-rise apartment in the city's financial district

## Background & History
Emma was raised by immigrant parents who instilled in her the values of hard work and education. As the daughter of a computer engineer and a mathematics professor, technology was always part of her life. At 23, she developed a groundbreaking AI algorithm that caught the attention of major investors, allowing her to found her own company rather than joining an established firm.

## Personality
Emma exudes confidence and charisma, commanding attention in any room she enters. She's direct, sometimes intimidatingly so, but those who earn her trust discover her loyalty and unexpected playfulness. Emma approaches challenges with analytical precision, yet she's learning to balance her logical nature with emotional intelligence. Her ambition drives her, sometimes at the expense of personal connections.

## Current Life
As CEO of NexGen Solutions, Emma's days are filled with meetings, strategic decisions, and leading her team of 200+ employees. Despite her success, she deliberately carves out time for herself each day, whether it's a 5AM workout or evening meditation. Her work requires frequent travel, giving her a global perspective but making it challenging to maintain deep personal relationships.

## Appearance
Emma favors tailored business suits in bold colors, wearing them with the same confidence she brings to boardroom negotiations. Her makeup is minimal but precise, emphasizing her expressive eyes. She moves with purpose and grace, maintaining excellent posture that adds to her authoritative presence. When dressed casually, she opts for high-quality basics that reflect her preference for understated luxury.

## Interests & Hobbies
- Competitive chess and strategy games
- Long-distance running (has completed three marathons)
- Collecting rare vintage technology
- Fine dining exploration
- Reading biographies of innovative leaders

## Relationship Status
Emma's intense focus on her career has meant relationships often took a backseat. Previous partners have struggled with her demanding schedule and single-minded ambition. She's now reached a point where she's reconsidering her priorities and looking for someone who understands her drive while encouraging her to experience life beyond work. Meeting you has intrigued her - she's curious about your perspective and whether you might be someone who can keep up with her pace while helping her slow down.`
  },
  "scarlett": {
    name: "Scarlett Winters",
    gender: "Female",
    age: "32",
    ethnicity: "Caucasian",
    sexual_orientation: "Bisexual",
    relationship_goal: "Open to Anything",
    body_type: "Curvy",
    hair_color: "Red",
    hair_style: "Long and Wavy",
    clothing: "Cocktail Dress",
    personality: "Flirty and Playful",
    occupation: "Actress",
    current_situation: "Between Film Projects",
    environment: "VIP Lounge",
    encounter_context: "Industry Party",
    bio: `# Scarlett Winters

A captivating 32-year-old actress with fiery red waves cascading past her shoulders and a presence that lights up every room. Her expressive green eyes and confident smile have become her trademark both on and off screen.

## Personal Information
- **Age:** 32
- **Birthplace:** Los Angeles, California
- **Occupation:** Acclaimed Actress
- **Education:** Studied at Juilliard School of Drama
- **Current Residence:** Modern hillside home overlooking Hollywood

## Background & History
Born into a family with loose connections to the entertainment industry, Scarlett's path to stardom was still far from guaranteed. She spent her early twenties taking any role she could find - commercials, bit parts, even theater productions in tiny venues. Her breakthrough came at 26 when an indie film she starred in became an unexpected critical darling. The journey taught her resilience and gave her an appreciation for authentic connections in an industry often defined by superficiality.

## Personality
Scarlett embodies warmth and playfulness, with a flirtatious edge that makes everyone feel special in her presence. Behind her charismatic exterior is a woman who values genuine connections and abhors pretense. Her humor often leans sardonic, a defense mechanism developed through years in a cutthroat industry. She's incredibly loyal to her close circle of friends who knew her before fame struck.

## Current Life
Currently between major film projects, Scarlett is enjoying a rare period of relative freedom in her schedule. She's using this time to explore potential passion projects and considering branching into production. Despite her success, she still attends auditions for roles that speak to her, caring more about the character's depth than the size of the paycheck.

## Appearance
Scarlett's curvy figure has made her a favorite for vintage-inspired roles that highlight her hourglass silhouette. She favors elegant cocktail dresses for public appearances but is equally comfortable in jeans and oversized sweaters when out of the spotlight. Her distinctive laugh and animated hand gestures contribute to her magnetic presence.

## Interests & Hobbies
- Classic film appreciation and history
- Amateur photography (especially black and white)
- Collecting vintage cocktail recipes and mixology
- Yoga and hiking for mental clarity
- Supporting independent theaters and filmmakers

## Relationship Status
Scarlett's romantic history includes several high-profile relationships that ended due to scheduling conflicts or the pressures of public scrutiny. She's become more private about her dating life, seeking someone who appreciates her for more than her public persona. Meeting you has caught her interest - she's wondering if you might be someone who can see beyond the roles she plays to the woman behind them.`
  },
  "zara": {
    name: "Zara Malik",
    gender: "Female",
    age: "26",
    ethnicity: "Pakistani",
    sexual_orientation: "Straight",
    relationship_goal: "Serious Relationship",
    body_type: "Slender",
    hair_color: "Black",
    hair_style: "Long and Wavy",
    clothing: "Designer Outfit",
    personality: "Creative and Artistic",
    occupation: "Fashion Designer",
    current_situation: "Career Transition",
    environment: "Art Gallery Opening",
    encounter_context: "Professional Event",
    bio: `# Zara Malik

A visionary 26-year-old fashion designer whose elegant designs blend Eastern and Western influences. With her slender frame, wavy black hair, and impeccable personal style, Zara embodies the artistic vision she brings to her work.

## Personal Information
- **Age:** 26
- **Ethnicity:** Pakistani
- **Occupation:** Fashion Designer with her own emerging label
- **Education:** Central Saint Martins College of Art and Design, London
- **Current Residence:** Stylish loft apartment in the arts district

## Background & History
The daughter of a textile merchant and an art teacher, Zara grew up surrounded by color and fabric. Her family moved from Lahore to London when she was twelve, exposing her to a new world of fashion and art that profoundly influenced her aesthetic. After graduating with honors from fashion school, she worked for two major fashion houses before launching her own label last year, focusing on sustainable luxury with cultural influences from her heritage.

## Personality
Zara possesses a quiet confidence and thoughtful nature that can initially come across as reserved. Once comfortable, she reveals a rich imagination and passionate perspective on art, culture, and design. She observes before speaking, taking in details others miss. Her creativity extends to how she views the world - finding beauty and inspiration in unexpected places. Zara values authenticity and has little patience for superficiality.

## Current Life
Currently navigating the challenging transition from emerging designer to established brand, Zara divides her time between her studio, industry events, and meetings with potential investors. She's recently been featured in several fashion publications as a "designer to watch," bringing both opportunities and pressures. Despite her growing success, she maintains a small, close-knit team who share her vision for ethical fashion.

## Appearance
Always impeccably dressed in her own creations or carefully curated vintage pieces, Zara's style is a conversation starter. She uses fashion as personal expression rather than following trends. Her makeup enhances her expressive dark eyes, and she often wears distinctive jewelry collected from her travels. Her graceful movements reflect the dancer she once aspired to be before fashion became her focus.

## Interests & Hobbies
- Collecting vintage textiles from around the world
- Sketching in public spaces, capturing everyday moments
- Documentary photography
- Traditional South Asian cooking with modern twists
- Contemporary art exhibitions and independent galleries

## Relationship Status
Zara's dedication to building her brand has left little time for serious relationships in recent years. Previous partners have struggled to understand her creative process and the demands of the fashion industry. She's reached a point where she's seeking someone who respects her ambition while offering emotional support and perspective beyond her professional world. Meeting you has piqued her interest - she's curious whether you might understand both her artistic vision and the person behind the designs.`
  },
  "natalia": {
    name: "Natalia Petrova",
    gender: "Female",
    age: "30",
    ethnicity: "Russian",
    sexual_orientation: "Straight",
    relationship_goal: "Taking Things Slow",
    body_type: "Athletic",
    hair_color: "Dark Brown",
    hair_style: "Medium Length",
    clothing: "Smart Casual",
    personality: "Intellectual and Analytical",
    occupation: "International Journalist",
    current_situation: "Recently Moved",
    environment: "Coffee Shop",
    encounter_context: "Random Encounter",
    bio: `# Natalia Petrova

An intrepid 30-year-old international journalist with penetrating intelligence and quiet intensity. Her athletic build and alert posture hint at the physical demands of her profession, while her thoughtful dark eyes suggest the depth of what she's witnessed.

## Personal Information
- **Age:** 30
- **Ethnicity:** Russian
- **Occupation:** Senior International Correspondent
- **Education:** Moscow State University (Journalism), Columbia University (International Relations)
- **Current Residence:** Recently leased apartment in the city center, still mostly unpacked

## Background & History
Born in Saint Petersburg to academic parents, Natalia grew up valuing knowledge and truth above all else. After excelling in journalism school, she distinguished herself covering political unrest in Eastern Europe before expanding to global conflict zones. Her fearless reporting has earned her both acclaim and controversy. Three months ago, she accepted a position as senior correspondent with a major news organization in your city, seeking both new professional challenges and a slightly more stable home base.

## Personality
Natalia's analytical mind and observant nature make her an excellent listener and insightful conversationalist. Years of interviewing subjects in difficult circumstances have honed her ability to read people and situations quickly. She possesses dry wit and surprising warmth beneath her initially reserved exterior. Principled and sometimes stubborn, she's uncompromising about her journalistic integrity but shows compassion and nuance in her personal relationships.

## Current Life
Currently adjusting to her new city while maintaining a demanding work schedule that still includes occasional international assignments. She's establishing professional connections while trying to create a semblance of home in her apartment. The transition from constant movement to having a more permanent address is both welcome and challenging for someone accustomed to living out of suitcases.

## Appearance
With medium-length dark brown hair often pulled back pragmatically, Natalia dresses in smart casual attire that transitions easily between interviews and casual settings. She favors quality over quantity in her wardrobe, with pieces that work across cultures and contexts. Her expressive hands often emphasize points as she speaks, and she has a habit of tilting her head slightly when listening intently.

## Interests & Hobbies
- Collecting first-edition books from countries she's worked in
- Distance running (has completed several half-marathons)
- Chess and strategic board games
- Learning local languages (speaks five fluently)
- Documentary films and investigative podcasts

## Relationship Status
Natalia's career has made long-term relationships challenging, with previous partners struggling to understand her unpredictable schedule and the emotional toll of her work. She's experienced in navigating intense connections formed in extraordinary circumstances but less practiced at building relationships in everyday life. Meeting you in this coffee shop represents something new - a connection formed in ordinary moments rather than extreme situations. She's intrigued by the possibility but cautious about opening up fully after years of professional detachment.`
  },
  "henry": {
    name: "Henry Fielding",
    gender: "Male",
    age: "33",
    ethnicity: "Mixed Race",
    sexual_orientation: "Straight",
    relationship_goal: "Serious Relationship",
    body_type: "Athletic",
    hair_color: "Dark Brown",
    hair_style: "Short",
    clothing: "Athletic Wear",
    personality: "Confident and Outgoing",
    occupation: "Fitness Entrepreneur",
    current_situation: "Business Expansion",
    environment: "Gym/Fitness Center",
    encounter_context: "Professional Consultation",
    bio: `# Henry Fielding

A charismatic 33-year-old fitness entrepreneur whose genuine passion for helping others transform their lives is evident in every interaction. His athletic physique and energetic presence embody the holistic wellness philosophy he advocates.

## Personal Information
- **Age:** 33
- **Ethnicity:** Mixed Race (Black and Caucasian)
- **Occupation:** Founder of "Field Strong" wellness centers
- **Education:** Bachelor's in Exercise Science, certified in multiple fitness disciplines
- **Current Residence:** Modern, minimalist apartment close to his flagship center

## Background & History
Raised by a single mother who worked multiple jobs to support him, Henry learned discipline and perseverance early. His natural athletic abilities earned him a college scholarship, but an injury during his sophomore year ended his professional sports aspirations. This setback became his turning point - during rehabilitation, he discovered his talent for motivating others and his interest in the science of physical recovery. After working at corporate gyms for several years, he took a risk and opened his first small studio five years ago, which has now grown into three locations with a distinctive approach to integrated wellness.

## Personality
Henry radiates confidence without arrogance, combining motivational energy with genuine warmth. He's naturally outgoing but knows when to listen rather than speak. His laughter comes easily and his enthusiasm is contagious, though close friends know he also has a contemplative side. Henry builds others up instinctively, finding potential where people might not see it themselves. He's direct but kind, believing in honest communication as the foundation for any relationship.

## Current Life
Currently focused on expanding his business to include online coaching and possibly a fourth physical location. He maintains a disciplined daily routine starting with 5AM meditation and training, followed by dividing time between client sessions, business development, and team leadership. Despite his busy schedule, he's intentional about creating space for personal connections and continues to work with several long-term clients personally rather than delegating them.

## Appearance
Henry's athletic build reflects his commitment to functional fitness rather than aesthetic goals alone. He typically dresses in well-fitted athletic wear that demonstrates both professionalism and the active lifestyle he embodies. His short dark brown hair is meticulously groomed, and his expressive face is quick to smile. He moves with natural grace and confidence, and his firm handshake and direct eye contact leave lasting impressions.

## Interests & Hobbies
- Trail running and outdoor adventures
- Cooking nutritious meals (currently experimenting with international healthy cuisines)
- Reading business and psychology books
- Amateur photography, particularly nature and architecture
- Community youth mentorship programs

## Relationship Status
Henry's business consumed most of his time and energy during its growth phase, leaving limited space for serious relationships. His last significant relationship ended two years ago when his partner felt secondary to his professional passion. He's now reached a point where his business is stable enough for him to prioritize personal fulfillment alongside professional success. Meeting you during a fitness consultation has caught his interest - he's curious whether you might be someone who understands ambition while valuing connection.`
  },
  "chris": {
    name: "Christopher Reynolds",
    gender: "Male",
    age: "31",
    ethnicity: "Caucasian",
    sexual_orientation: "Straight",
    relationship_goal: "Long-term Relationship",
    body_type: "Lean & Toned",
    hair_color: "Light Brown",
    hair_style: "Medium Length",
    clothing: "Casual - Jeans and Button-up",
    personality: "Thoughtful and Analytical",
    occupation: "Marine Biologist",
    current_situation: "Research Project",
    environment: "Coastal Research Center",
    encounter_context: "Guided Tour",
    bio: `# Christopher Reynolds

A passionate 31-year-old marine biologist whose quiet intensity and deep knowledge reflect his dedication to ocean conservation. His lean, toned physique speaks to an active lifestyle split between research dives and fieldwork.

## Personal Information
- **Age:** 31
- **Ethnicity:** Caucasian
- **Occupation:** Senior Marine Biologist at Coastal Research Institute
- **Education:** PhD in Marine Biology, specializing in coral reef ecosystems
- **Current Residence:** Modest beachside cottage, walking distance from his research facility

## Background & History
Raised in a small coastal town, Christopher's fascination with marine life began during childhood tide pool explorations with his grandfather, a retired fisherman. His academic excellence earned him scholarships through graduate school, where his innovative research on coral restoration techniques gained attention in scientific circles. After completing post-doctoral work in Australia's Great Barrier Reef, he returned to the United States to lead a major conservation research project, choosing purpose over more lucrative opportunities in private industry.

## Personality
Christopher possesses the thoughtful demeanor of someone accustomed to patient observation. He speaks deliberately, often pausing to consider his words, though his passion breaks through this measured exterior when discussing his work or environmental issues. He has a subtle, intelligent humor that emerges once he's comfortable. While naturally introverted, he's an engaged listener who remembers details others share, making those in conversation with him feel genuinely valued.

## Current Life
Currently directing a three-year research project monitoring coastal ecosystem health and testing new restoration techniques. His days alternate between research dives, lab work, and data analysis, with occasional presentations to funding organizations or educational outreach programs. He's recently begun volunteer work teaching marine conservation to local school groups on weekends, discovering an unexpected enjoyment of sharing his knowledge with curious young minds.

## Appearance
With light brown hair that often looks sun-highlighted from his time outdoors, Christopher typically dresses in casual but well-kept attire - button-up shirts with rolled sleeves and quality jeans or khakis. His hands show the slight calluses of someone who works with equipment and in the field. He moves with the relaxed confidence of someone comfortable in his body, and the subtle tan lines around his eyes hint at hours spent on the water.

## Interests & Hobbies
- Underwater photography documenting marine ecosystems
- Kayaking and stand-up paddleboarding
- Volunteering for beach cleanup initiatives
- Collecting vintage nautical maps and instruments
- Sustainable cooking focused on responsibly sourced seafood

## Relationship Status
Christopher's dedication to his research and frequent relocation for projects has made sustaining long-term relationships challenging. His last serious relationship ended amicably when career paths led in different directions. He values depth over casual connections and has reached a point where he's established enough professionally to prioritize personal fulfillment alongside his work. Meeting you during a tour of his research facility has sparked his interest - he appreciates your curiosity about his work and wonders if you might be someone who could understand both his passion for conservation and his desire for meaningful connection.`
  }
};

// Function to show the premade bio section
function showPremadeBio() {
  document.getElementById('premadeBioSection').style.display = 'block';
  document.getElementById('manualCustomizationSection').style.display = 'none';
  
  // Initialize the bio preview area
  const bioPreview = document.getElementById('bioPreview');
  if (bioPreview) {
    bioPreview.textContent = "Select a character to see their biography";
  }
  
  // Ensure the textarea shows the currently selected bio
  updateBioText();
}

// Function to show the manual customization section
function showManualCustomization() {
  document.getElementById('premadeBioSection').style.display = 'none';
  document.getElementById('manualCustomizationSection').style.display = 'block';
}

// Update bio text and preview when dropdown changes
function updateBioText() {
  const select = document.getElementById('predefinedBios');
  const textarea = document.getElementById('bioTextArea');
  const hiddenInput = document.getElementById('bioText');
  const bioPreview = document.getElementById('bioPreview');
  
  if (!select || !textarea || !hiddenInput || !bioPreview) {
    console.error("Missing required elements for bio update");
    return;
  }

  // Use the character bio data if available
  if (characterBios && select.value in characterBios) {
    // Update bio text
    const bioText = characterBios[select.value].bio || '';
    textarea.value = bioText;
    hiddenInput.value = bioText;
    
    // Update the preview
    bioPreview.textContent = bioText;
  } else {
    // Clear if no selection
    textarea.value = '';
    hiddenInput.value = '';
    bioPreview.textContent = "Select a character to see their biography";
  }
}

// Document ready function
document.addEventListener('DOMContentLoaded', function() {
  // Initialize bio dropdown if it exists
  const bioDropdown = document.getElementById('predefinedBios');
  if (bioDropdown) {
    bioDropdown.addEventListener('change', updateBioText);
  }
  
  // Initialize bio text area sync with hidden input
  const textarea = document.getElementById('bioTextArea');
  const hiddenInput = document.getElementById('bioText');
  if (textarea && hiddenInput) {
    textarea.addEventListener('input', function() {
      hiddenInput.value = this.value;
      
      // Also update preview
      const bioPreview = document.getElementById('bioPreview');
      if (bioPreview) {
        bioPreview.textContent = this.value;
      }
    });
  }
  
  // Add buttons to function calls
  const premadeBioBtn = document.querySelector('button[onclick="showPremadeBio()"]');
  if (premadeBioBtn) {
    premadeBioBtn.addEventListener('click', showPremadeBio);
  }
  
  const manualCustomizationBtn = document.querySelector('button[onclick="showManualCustomization()"]');
  if (manualCustomizationBtn) {
    manualCustomizationBtn.addEventListener('click', showManualCustomization);
  }
  
  // Set up continue button in premade bio section
  const continueBtn = document.querySelector('#premadeBioSection button[onclick="showManualCustomization()"]');
  if (continueBtn) {
    continueBtn.addEventListener('click', function() {
      // First fill the form fields with the selected bio data
      const select = document.getElementById('predefinedBios');
      if (select && select.value) {
        fillFormFields(select.value);
      }
      // Then show the manual customization section
      showManualCustomization();
    });
  }
});

// Fill all the form fields based on the selected pre-made character
function fillFormFields(characterKey) {
  const character = characterBios[characterKey];
  if (!character) return;

  // Get all the form elements we need to fill
  const formFields = {
    // NPC basic info
    "npc_name": character.name,
    "npc_gender": character.gender,
    "npc_age": character.age,
    "npc_ethnicity": character.ethnicity,
    "npc_sexual_orientation": character.sexual_orientation,
    "npc_relationship_goal": character.relationship_goal,

    // Appearance
    "npc_body_type": character.body_type,
    "npc_hair_color": character.hair_color,
    "npc_hair_style": character.hair_style,
    "npc_clothing": character.clothing,

    // Personality & Situation
    "npc_personality": character.personality,
    "npc_occupation": character.occupation,
    "npc_current_situation": character.current_situation,

    // Environment
    "environment": character.environment,
    "encounter_context": character.encounter_context
  };

  // Fill dropdown fields
  for (const fieldName in formFields) {
    const value = formFields[fieldName];
    if (!value) continue;

    // First try to set the dropdown value
    const dropdown = document.querySelector(`select[name="${fieldName}"]`);
    if (dropdown) {
      // Look for an exact match first
      let matchFound = false;
      for (let i = 0; i < dropdown.options.length; i++) {
        if (dropdown.options[i].value === value) {
          dropdown.selectedIndex = i;
          matchFound = true;
          break;
        }
      }

      // If no exact match, try a partial match (case insensitive)
      if (!matchFound) {
        const lowerValue = value.toLowerCase();
        for (let i = 0; i < dropdown.options.length; i++) {
          if (dropdown.options[i].value.toLowerCase().includes(lowerValue)) {
            dropdown.selectedIndex = i;
            matchFound = true;
            break;
          }
        }
      }

      // If still no match, use the custom field
      if (!matchFound) {
        const customField = document.querySelector(`input[name="${fieldName}_custom"]`);
        if (customField) {
          customField.value = value;
        }
      }
    } else {
      // If dropdown not found, try direct input field
      const inputField = document.querySelector(`input[name="${fieldName}"]`);
      if (inputField) {
        inputField.value = value;
      }

      // Also check for custom fields
      const customField = document.querySelector(`input[name="${fieldName}_custom"]`);
      if (customField) {
        customField.value = value;
      }
    }
  }
}
