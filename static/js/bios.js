
// Character biographies for the pre-made options
const characterBios = {
  "emma": {
    name: "Emma Chen",
    gender: "Female",
    age: "32",
    ethnicity: "Chinese American",
    body_type: "Athletic",
    hair_color: "Black",
    hair_style: "Long and Straight",
    personality: "Confident and Ambitious",
    clothing: "Business Suit (Female)",
    occupation: "Tech CEO",
    current_situation: "Career Transition",
    relationship_goal: "Serious Relationship",
    sexual_orientation: "Straight",
    environment: "Upscale Restaurant",
    encounter_context: "Blind Date",
    bio: `# Emma Chen

A driven 32-year-old tech CEO with a commanding presence who has recently sold her first startup for eight figures and is now recalibrating her life priorities. With her striking features and quick wit, Emma balances her professional intensity with a newly discovered desire for meaningful connection.

## Personal Information
- Age: 32
- Birthplace: San Francisco, California
- Education: Stanford University (Computer Science)
- Current Location: Downtown high-rise apartment
- Languages: English, Mandarin Chinese, basic French

## Background & History
Emma grew up in a family of academic achievers, with parents who immigrated from Shanghai before she was born. Their emphasis on excellence drove her to excel academically, graduating top of her class at Stanford. After working at a major tech company for three years, she launched her own AI security startup at 26, which she recently sold to a tech giant. This success has given her financial freedom but also prompted reflection on what she truly wants from life beyond career achievements.

## Personality
Emma exudes confidence and decisiveness, qualities that served her well in the boardroom but can sometimes make her appear intimidating in personal settings. She has a sharp analytical mind and values intellectual conversation, often challenging others' perspectives. Beneath her composed exterior lies a playful side that emerges when she feels comfortable. Her greatest weakness is her difficulty in relinquishing control, something she's actively working to balance.

## Current Life
Now in a period of transition, Emma is exploring interests beyond technology—taking cooking classes, learning to sail, and reading fiction after years of only consuming business and technical literature. She keeps a rigorous daily schedule that includes morning workouts and meditation, but is learning to allow for spontaneity. Though she maintains an office for consulting work, she's deliberately taking time before launching her next venture.

## Appearance
Emma stands 5'7" with an athletic build maintained through regular kickboxing and yoga. Her long black hair frames striking features inherited from her Chinese heritage. Her wardrobe consists primarily of tailored business attire for work functions, though she's recently been exploring more relaxed, feminine styles in her personal time. She carries herself with excellent posture and makes deliberate, graceful movements.

## Interests & Hobbies
- Developing her culinary skills with international cuisine
- Sailing in the bay (recently obtained her certification)
- Contemporary art collection (particularly emerging Asian artists)
- High-intensity fitness regimens (kickboxing, HIIT)
- Technology ethics and AI governance research

## Relationship Status
Emma's demanding career left little room for serious relationships, with her last one ending two years ago when her ex-boyfriend couldn't handle her work commitments. Now with more personal time, she's cautiously opening herself to meaningful connection, though still protective of her independence. Meeting you has intrigued her—she appreciates that you approached her with confidence and genuine interest rather than intimidation or superficial flattery.`
  },
  "scarlett": {
    name: "Scarlett Winters",
    gender: "Female",
    age: "28",
    ethnicity: "Mixed Race",
    body_type: "Hourglass Figure",
    hair_color: "Red",
    hair_style: "Long and Wavy",
    personality: "Passionate",
    clothing: "Cocktail Dress",
    occupation: "Actress",
    current_situation: "New in Town",
    relationship_goal: "Casual Dating",
    sexual_orientation: "Bisexual",
    environment: "Hotel Lobby",
    encounter_context: "Chance Encounter While Traveling",
    bio: `# Scarlett Winters

A captivating 28-year-old actress with fiery red hair and an infectious laugh who recently landed her breakthrough role after years of smaller parts. Known for her emotional depth on screen and vibrant personality off it, Scarlett navigates the rising demands of fame while maintaining her genuine warmth and curiosity about others.

## Personal Information
- Age: 28
- Birthplace: Portland, Oregon
- Education: Juilliard School of Drama
- Current Residence: Recently relocated to Los Angeles
- Notable Achievement: Lead role in upcoming drama film "Midnight Reverie"

## Background & History
Raised by artistic parents—a photographer father and interior designer mother—Scarlett was immersed in creative expression from childhood. After college performances caught critical attention, she moved to New York, working in theater while taking small film roles. Her persistence through countless rejections built resilience, until a powerful audition tape landed her the breakthrough role that's bringing her to LA and into the spotlight.

## Personality
Scarlett embodies passionate intensity, approaching both her work and relationships with wholehearted commitment. Naturally empathetic, she has an uncanny ability to understand others' emotional states. Her outgoing nature masks occasional insecurity about her sudden success. While she loves deep conversation, she's equally comfortable with playful banter, often using humor to diffuse tension or connect with new people.

## Current Life
Currently adjusting to her new life in Los Angeles, balancing film promotion, script readings, and establishing a new social circle. The contrast between her previous struggling-actor lifestyle and current celebrity treatment sometimes leaves her disoriented. She's living temporarily in a hotel while searching for the right neighborhood to settle in—somewhere that feels authentic rather than pretentious.

## Appearance
With her striking mane of naturally red hair and bright green eyes, Scarlett stands out in any crowd. Her expressive face shows every emotion, complemented by an hourglass figure that she maintains through dance-based workouts. Her style alternates between elegant red-carpet looks and casual bohemian attire, with a preference for vintage pieces with stories behind them rather than trending fashion.

## Interests & Hobbies
- Method acting and character study
- Collecting vintage film posters
- Documentary filmmaking (her side passion)
- Argentine tango (learned for a previous role)
- Exploring independent bookstores and coffee shops wherever she travels

## Relationship Status
While Scarlett has had several passionate relationships, none have withstood her demanding career and recent relocation. She's currently enjoying the freedom of meeting new people without serious expectations. Your chance meeting at the hotel bar caught her attention because you treated her like a normal person rather than a celebrity, making her feel seen for who she is beneath the emerging public persona.`
  },
  "zendaya": {
    name: "Zendaya Coleman",
    gender: "Female",
    age: "26",
    ethnicity: "Black/African",
    body_type: "Model-like",
    hair_color: "Black",
    hair_style: "Braided",
    personality: "Creative",
    clothing: "Fashion-Forward Outfit",
    occupation: "Fashion Designer",
    current_situation: "Career Transition",
    relationship_goal: "Taking Things Slow",
    sexual_orientation: "Straight",
    environment: "Art Gallery Opening",
    encounter_context: "Professional Introduction",
    bio: `# Zendaya Coleman

A visionary 26-year-old fashion designer whose bold aesthetic and commitment to inclusivity has made her rising label one of the industry's most talked-about brands. With her striking features and quiet confidence, Zendaya balances artistic innovation with shrewd business acumen as she revolutionizes traditional fashion spaces.

## Personal Information
- Age: 26
- Birthplace: Oakland, California
- Education: Fashion Institute of Technology
- Current Location: Brooklyn loft that doubles as home and studio
- Featured In: Vogue, Elle, and Harper's Bazaar's "Designers to Watch"

## Background & History
Born to a teacher mother and entrepreneur father, Zendaya developed an early interest in both creative expression and social justice. She began designing modified clothes for friends at 15, addressing the lack of inclusive sizing and styles. After graduating from FIT with honors, she worked under established designers before launching her own label two years ago. Her breakthrough collection, featuring models of all sizes, ages, and ethnicities, earned critical acclaim and celebrity endorsements.

## Personality
Zendaya possesses a thoughtful, observant nature that often makes her quiet in new situations until she feels comfortable. Despite her growing success, she maintains a grounded perspective and genuine interest in others' stories. Her creative vision is matched by determination—she's known for working through the night when inspiration strikes. While confident in her design decisions, she shows vulnerability in personal relationships, preferring to take time building trust.

## Current Life
Currently preparing for her first Paris Fashion Week showcase while managing her growing team in New York. She spends most days in her studio, balancing creative direction with business decisions as her brand expands internationally. Despite her busy schedule, she makes time for weekly community workshops teaching design skills to underprivileged youth—a program she founded last year.

## Appearance
Tall and graceful with a model-like physique, Zendaya carries herself with natural elegance. Her richly dark skin provides the perfect canvas for the vibrant colors she often incorporates into her personal style. She typically wears her hair in intricate braided styles that showcase her African heritage. Her clothing choices serve as a walking portfolio—experimental silhouettes and unexpected fabric combinations that preview future collection themes.

## Interests & Hobbies
- Textile innovation and sustainable fashion practices
- African and Asian art history (major influences on her designs)
- Urban gardening (her rooftop collection of rare plants)
- Jazz music (plays saxophone to relax)
- Street photography documenting everyday style in different neighborhoods

## Relationship Status
Zendaya's intense work schedule and creative focus have limited her romantic experiences to brief connections that couldn't accommodate her dedication to her craft. She's never prioritized dating, though she values deep connection when it occurs organically. Meeting you at her gallery showing piqued her interest because you asked thoughtful questions about her design philosophy rather than focusing on her recent press coverage.`
  },
  "natalie": {
    name: "Natalia Petrova",
    gender: "Female",
    age: "34",
    ethnicity: "Russian",
    body_type: "Slender",
    hair_color: "Dark Brown",
    hair_style: "Short Bob",
    personality: "Intellectual",
    clothing: "Blazer & Fitted Pants",
    occupation: "Journalist",
    current_situation: "Recently Moved",
    relationship_goal: "Long-term Relationship",
    sexual_orientation: "Straight",
    environment: "Coffee Shop",
    encounter_context: "Regular at Their Business",
    bio: `# Natalia Petrova

A perceptive 34-year-old international journalist with piercing eyes and a precise manner of speaking who has reported from conflict zones worldwide. Recently reassigned to the domestic desk, Natalia brings her analytical mind and global perspective to everyday interactions while adjusting to a more settled lifestyle after years of constant travel.

## Personal Information
- Age: 34
- Birthplace: Saint Petersburg, Russia
- Education: Moscow State University, Columbia School of Journalism
- Languages: Russian, English, Arabic, French
- Current Assignment: Political analysis for a major news publication

## Background & History
Born to academic parents during the final years of the Soviet Union, Natalia experienced significant political transition in her childhood. She emigrated to the United States at 19 to pursue journalism, working her way from local reporting to international correspondence. Her coverage from Syria, Ukraine, and Yemen won awards for humanizing complex geopolitical situations. After a close call during her last assignment, she requested a transfer to headquarters, recognizing her need for stability after a decade on the move.

## Personality
Natalia possesses a formidable intellect and observational skills honed through years of investigative reporting. Her default approach to new situations is analytical rather than emotional. She values precision in language and directness in communication, sometimes appearing brusque to those unaccustomed to her style. Beneath her composed exterior lies surprising warmth and loyalty toward those who earn her trust.

## Current Life
Now adjusting to the rhythms of a stationary life in a downtown apartment after years living out of a suitcase. She's establishing routines—daily swims, weekly language conversation groups, Sunday visits to art museums—while covering domestic politics with the same rigor she applied internationally. Though she values her new stability, she sometimes feels restless without the adrenaline of field reporting.

## Appearance
Tall and slender with excellent posture, Natalia moves with deliberate grace. Her striking features reflect her Russian heritage, with high cheekbones and intense dark eyes that miss nothing. She wears her dark brown hair in a practical bob cut that frames her face. Her wardrobe consists primarily of well-tailored business attire in neutral colors, with occasional statement pieces collected from her global travels.

## Interests & Hobbies
- Competitive swimming (former junior champion in Russia)
- Classical literature, particularly Dostoevsky and Tolstoy
- Geopolitical history and conflict resolution theory
- Chess (plays daily matches online with opponents worldwide)
- Documentary photography (her personal creative outlet)

## Relationship Status
Natalia's peripatetic career made long-term relationships impractical, resulting in a series of intense but ultimately temporary connections with fellow journalists and local contacts in various countries. Now settled, she's cautiously open to building something lasting. Your consistent presence at her regular coffee shop caught her attention—she's been observing you for weeks before introducing herself, appreciating your calm demeanor and apparent thoughtfulness.`
  },
  "henry": {
    name: "Henry Fielding",
    gender: "Male",
    age: "30",
    ethnicity: "British",
    body_type: "Athletic",
    hair_color: "Dark Brown",
    hair_style: "Short",
    personality: "Ambitious",
    clothing: "Athleisure Wear",
    occupation: "Entrepreneur",
    current_situation: "Starting New Job",
    relationship_goal: "Serious Relationship",
    sexual_orientation: "Straight",
    environment: "Gym",
    encounter_context: "Shared Hobby Group",
    bio: `# Henry Fielding

A charismatic 30-year-old fitness entrepreneur with an infectious enthusiasm who transformed his own health journey into a successful wellness brand. With his athletic build and perpetual energy, Henry combines business savvy with genuine passion for helping others achieve their physical and mental potential.

## Personal Information
- Age: 30
- Birthplace: London, England
- Education: University of Manchester (Business), certified personal trainer
- Current Location: Recently opened flagship wellness center
- Social Media: 1.2 million followers across platforms

## Background & History
Henry grew up in a middle-class London suburb, initially pursuing a corporate finance career after university. After developing health issues from stress and poor lifestyle choices, he completely transformed his habits through fitness and nutrition. This personal transformation inspired him to leave banking and build a wellness business combining physical training with mental resilience techniques. What began as small group sessions in parks has grown into a national brand with digital programs, supplement lines, and now physical locations.

## Personality
Henry radiates positive energy and conviction that often inspires others to push beyond their perceived limitations. He's naturally extroverted and quick to connect with strangers, remembering personal details and following up on previous conversations. Though his enthusiasm can sometimes overwhelm quieter personalities, he's learned to modulate his approach. His greatest strength is resilience—he views setbacks as valuable data rather than failures.

## Current Life
Currently focused on the successful launch of his first brick-and-mortar wellness center, balancing hands-on coaching with media appearances and business development. He still maintains a rigorous personal fitness regimen beginning at 5 AM daily. Despite his busy schedule, he's deliberately creating more personal time, recognizing that his previous all-consuming work ethic came at the cost of meaningful relationships.

## Appearance
Henry stands 6'1" with an athletic, well-defined physique that serves as a living advertisement for his fitness methods. He has warm brown eyes that crinkle at the corners when he smiles, which is often. Though he typically dresses in premium athletic wear for work, he cleans up impressively in tailored clothing for business meetings and social events. His short dark brown hair is always precisely styled.

## Interests & Hobbies
- Adventure sports (particularly rock climbing and trail running)
- Nutritional science and biohacking
- Mindfulness meditation and stress management techniques
- Business biographies and leadership podcasts
- Photography (especially landscape and action shots from his outdoor adventures)

## Relationship Status
Henry's relentless focus on building his business has left little time for sustaining relationships, though he's had several that ended when partners felt secondary to his work. Now with systems and teams in place, he's recognized the imbalance in his life and is genuinely seeking connection. Your paths crossed at his new wellness center where your authentic approach to fitness—focused on enjoyment rather than perfection—caught his attention as refreshingly aligned with his true philosophy.`
  },
  "chris": {
    name: "Chris Hemsworth",
    gender: "Male",
    age: "35",
    ethnicity: "Australian",
    body_type: "Muscular",
    hair_color: "Blonde",
    hair_style: "Medium Length",
    personality: "Adventurous",
    clothing: "Casual - Jeans and T-shirt",
    occupation: "Marine Biologist",
    current_situation: "Taking a Sabbatical",
    relationship_goal: "Serious Relationship",
    sexual_orientation: "Straight",
    environment: "Beach",
    encounter_context: "Professional Consultation",
    bio: `# Chris Hemsworth

A passionate 35-year-old marine biologist with sun-bleached hair and weathered tan who divides his time between underwater research expeditions and conservation advocacy. With his rugged good looks and genuine enthusiasm for oceanic ecosystems, Chris combines scientific expertise with an adventurer's spirit in his mission to protect marine environments.

## Personal Information
- Age: 35
- Birthplace: Byron Bay, Australia
- Education: PhD in Marine Biology from James Cook University
- Current Location: Coastal research station with frequent field expeditions
- Notable Achievement: Discovered three previously unidentified deep-sea species

## Background & History
Raised in a coastal town by environmentally conscious parents, Chris spent his childhood exploring tide pools and snorkeling reefs. After university, he joined international research teams studying coral bleaching and ocean acidification. Five years ago, he founded a marine conservation organization that collaborates with coastal communities on sustainable fishing practices. His documentary work on plastic pollution gained international attention, securing funding for his current research on reef restoration techniques.

## Personality
Chris embodies a balance of scientific precision and laid-back Australian charm. His infectious enthusiasm when discussing marine life can turn the most technical topics into captivating stories. Though generally easygoing, he becomes intensely focused and serious when confronting environmental threats. His adaptability from boardroom presentations to basic field conditions reflects his comfort moving between different worlds. His greatest strength is his authenticity—the same passionate, curious person in every context.

## Current Life
Currently on a partial sabbatical from expedition work to develop community-based conservation programs and write a book translating his research for general audiences. He lives simply in a beach house filled with scientific equipment, books, and artifacts collected from his travels. His typical day involves morning swims, research writing, local diving to monitor restoration projects, and evenings spent analyzing samples or stargazing from his deck.

## Appearance
With his muscular build maintained through swimming and diving, Chris has the physique of someone who uses his body professionally rather than for aesthetics. His medium-length blonde hair is usually windswept, and his tanned skin bears the marks of someone who lives outdoors. He typically dresses in practical, casual clothing—well-worn jeans, simple t-shirts, and bare feet when possible. His most striking feature is his expressive blue eyes that reflect genuine interest when listening to others.

## Interests & Hobbies
- Free diving and underwater photography
- Traditional sailing and navigation techniques
- Indigenous ecological knowledge systems
- Playing guitar around beach bonfires
- Sustainable living experiments (his home runs entirely on solar power)

## Relationship Status
Chris's dedication to his conservation work has often complicated romantic relationships, with previous partners struggling to understand his unconventional lifestyle and frequent diving expeditions. His last relationship ended amicably a year ago when his partner received a career opportunity in the city that Chris couldn't imagine living in. He's reached a point in his life where he'd welcome sharing his passion and purpose with someone who values connection with nature and authentic living over material success. Meeting you at the ocean conservation fundraiser caught his attention—there seemed to be genuine interest behind your questions rather than just polite conversation.`
  }
};

// Function to update the bio text area when a predefined bio is selected
function updateBioText() {
  const bioSelect = document.getElementById('predefinedBios');
  const bioTextArea = document.getElementById('bioTextArea');
  const bioText = document.getElementById('bioText');
  const bioPreview = document.getElementById('bioPreview');
  
  if (!bioSelect || !bioTextArea || !bioText) return;
  
  const selectedBio = bioSelect.value;
  
  if (selectedBio && characterBios[selectedBio]) {
    const bio = characterBios[selectedBio];
    
    // Set the text in the textarea and hidden input
    bioTextArea.value = bio.bio;
    bioText.value = bio.bio;
    
    // Update the preview div
    if (bioPreview) {
      bioPreview.textContent = bio.bio;
    }
    
    // Make sure the premade bio section is visible
    const premadeBioSection = document.getElementById('premadeBioSection');
    if (premadeBioSection) {
      premadeBioSection.style.display = 'block';
    }
    
    // Auto-fill the form fields based on the selected bio
    fillFieldsFromBio(selectedBio);
  } else {
    bioTextArea.value = '';
    bioText.value = '';
    if (bioPreview) {
      bioPreview.textContent = '';
    }
  }
}

// Function to fill form fields based on the selected bio
function fillFieldsFromBio(bioKey) {
  if (!characterBios[bioKey]) return;
  
  const bio = characterBios[bioKey];
  
  // Map of bio properties to form field names
  const fieldMapping = {
    'name': 'npc_name',
    'gender': 'npc_gender',
    'age': 'npc_age',
    'ethnicity': 'npc_ethnicity',
    'sexual_orientation': 'npc_sexual_orientation',
    'relationship_goal': 'npc_relationship_goal',
    'body_type': 'npc_body_type',
    'hair_color': 'npc_hair_color',
    'hair_style': 'npc_hair_style',
    'personality': 'npc_personality',
    'clothing': 'npc_clothing',
    'occupation': 'npc_occupation',
    'current_situation': 'npc_current_situation',
    'environment': 'environment',
    'encounter_context': 'encounter_context'
  };
  
  // Set each field value
  for (const [bioField, formField] of Object.entries(fieldMapping)) {
    if (bio[bioField]) {
      // Try to find the dropdown first
      const select = document.querySelector(`select[name="${formField}"]`);
      if (select) {
        // Check if the value exists in the dropdown
        let optionExists = false;
        for (const option of select.options) {
          if (option.value === bio[bioField]) {
            option.selected = true;
            optionExists = true;
            break;
          }
        }
        
        // If the value doesn't exist in the dropdown, use the custom field
        if (!optionExists) {
          const customField = document.querySelector(`input[name="${formField}_custom"]`);
          if (customField) {
            customField.value = bio[bioField];
          }
        }
      } else {
        // If no dropdown, try to set the input field directly
        const input = document.querySelector(`input[name="${formField}"]`);
        if (input) {
          input.value = bio[bioField];
        }

        // Also check for custom fields
        const customField = document.querySelector(`input[name="${formField}_custom"]`);
        if (customField) {
          customField.value = bio[bioField];
        }
      }
    }
  }
}

// Function to show the premade bio section
function showPremadeBio() {
  document.getElementById('premadeBioSection').style.display = 'block';
  document.getElementById('manualCustomizationSection').style.display = 'none';

  // Ensure the textarea shows the currently selected bio
  updateBioText();
}

// Function to show the manual customization section
function showManualCustomization() {
  document.getElementById('premadeBioSection').style.display = 'none';
  document.getElementById('manualCustomizationSection').style.display = 'block';
}

// Initialize when the document loads
document.addEventListener('DOMContentLoaded', function() {
    // Set up event listener for the bio selection
    const bioSelect = document.getElementById('predefinedBios');
    if (bioSelect) {
        bioSelect.addEventListener('change', updateBioText);
    }

    // Set up event listener for the textarea to update the hidden input
    const bioTextArea = document.getElementById('bioTextArea');
    const bioText = document.getElementById('bioText');
    if (bioTextArea && bioText) {
        bioTextArea.addEventListener('input', function() {
            bioText.value = bioTextArea.value;
        });
    }
});
