
// Character bio database
const characterBios = {
  "emma": {
    name: "Emma Chen",
    gender: "Female",
    age: "32",
    ethnicity: "Chinese American",
    sexual_orientation: "Straight",
    relationship_goal: "Looking for a genuine connection",
    body_type: "Athletic",
    hair_color: "Black",
    hair_style: "Long and Straight",
    personality: "Ambitious and Confident",
    clothing: "Business Casual - Blazer",
    occupation: "Tech CEO",
    current_situation: "Recently launched a successful startup",
    environment: "Upscale Restaurant",
    encounter_context: "Business Meeting",
    bio: `# Emma Chen

Ambitious, brilliant, and always two steps ahead of everyone else, Emma Chen is the 32-year-old founder and CEO of NeuraSync, a breakthrough AI company that's disrupting Silicon Valley. With her striking beauty and commanding presence, she captures attention in any room she enters.

## Personal Information
- Age: 32
- Birthplace: San Francisco, California
- Education: Stanford University (Computer Science)
- Residence: Modern high-rise penthouse in downtown San Francisco
- Languages: English, Mandarin, and conversational French

## Background & History
Emma was born to immigrant parents who sacrificed everything to give her opportunities they never had. Her father was a computer engineer and her mother a mathematics professor. By 16, she had already developed her first app, and by 23, she secured her first million-dollar funding round. Her most defining moment came when she lost everything in a failed startup at 27, only to rebuild from scratch with the revolutionary AI technology that became NeuraSync.

## Personality
Emma exudes confidence and intensity that can be intimidating at first glance. She's direct, sometimes brutally honest, but with a disarming sense of humor that emerges once she's comfortable. While fiercely independent, she secretly yearns for someone who can match her intellect but also help her unwind from the constant pressure of her position. She's loyal to a fault to those who earn her trust.

## Current Life
Between board meetings and international business trips, Emma barely has time to breathe. She works eighteen-hour days, fueled by premium coffee and sheer determination. Her apartment, while luxurious, feels more like a hotel than a home due to how little time she spends there. Recently, she's begun questioning if success is worth the isolation it has brought her.

## Appearance
Emma stands 5'7" with an athletic build maintained through daily pre-dawn runs and kickboxing. Her straight black hair falls just past her shoulders, often tied back in a sleek ponytail. She carries herself with perfect posture and moves with deliberate grace. Her wardrobe consists of designer business attire in bold colors that make a statement, with her signature red blazer being a personal favorite.

## Interests & Hobbies
- Competitive chess (was nationally ranked in college)
- Kickboxing and trail running
- Classical piano (plays to decompress)
- Collecting rare first-edition books
- Gourmet cooking (specializes in fusion of Chinese and French cuisine)

## Relationship Status
Emma's last serious relationship ended two years ago when her partner couldn't handle coming second to her career. Since then, she's had little time for dating, though she's reached a point where she's reconsidering her priorities. Meeting you has sparked her interest—you seem different from the yes-men and opportunists who typically surround her. She's curious if you might be someone who can understand both her drive and her need for genuine connection.`
  },
  "scarlett": {
    name: "Scarlett Winters",
    gender: "Female",
    age: "28",
    ethnicity: "Caucasian",
    sexual_orientation: "Bisexual",
    relationship_goal: "Casual Dating",
    body_type: "Hourglass Figure",
    hair_color: "Auburn",
    hair_style: "Long and Wavy",
    personality: "Confident and Mysterious",
    clothing: "Elegant Evening Attire",
    occupation: "Hollywood Actress",
    current_situation: "Between film projects",
    environment: "Upscale Hotel Bar",
    encounter_context: "Celebrity Charity Gala",
    bio: `# Scarlett Winters

A rising star with magnetic charm and enigmatic presence, Scarlett Winters has captivated audiences worldwide with her versatile acting and undeniable screen presence. At 28, she balances the glamour of Hollywood with an unexpected down-to-earth authenticity that few get to witness.

## Personal Information
- Age: 28
- Birthplace: Boston, Massachusetts
- Education: Juilliard School (Drama)
- Residence: Modernist villa in the Hollywood Hills
- Languages: English, conversational Italian

## Background & History
Born to a theater director father and costume designer mother, Scarlett practically grew up on stage. She performed in her first professional production at age 12 and moved to New York at 17 to study drama. After years of struggling with small theater roles and commercials, her breakthrough came at 24 when she landed the lead in an indie film that became a surprise hit at Sundance. This launched her career into Hollywood's spotlight, leading to her current status as one of the industry's most sought-after talents.

## Personality
Scarlett exudes confidence and mystery in public, but close friends know her as thoughtful and surprisingly introspective. She has a playful sense of humor and loves intellectual conversation. While professionally fearless, she guards her private life carefully due to past betrayals. She values authenticity above all else and can instantly spot insincerity. Despite her success, she sometimes feels like an outsider in Hollywood's social circles.

## Current Life
Between major film projects, Scarlett is enjoying a rare moment of downtime. She's using this break to reconnect with herself away from the cameras and consider more selective roles that challenge her artistically. Though surrounded by industry people constantly, she's been feeling increasingly isolated, craving genuine connection beyond the superficial Hollywood relationships.

## Appearance
With striking auburn hair that falls in natural waves past her shoulders, Scarlett has a classic hourglass figure and moves with graceful poise developed through years of movement training. Her most captivating feature is her expressive green eyes that seem to change color in different lighting. She dresses elegantly but not flashily, preferring timeless styles over current trends, though she's known to take fashion risks at major events.

## Interests & Hobbies
- Film photography with vintage cameras
- Collecting vinyl records (especially jazz and blues)
- Practicing method acting techniques
- Amateur astronomy
- Italian cooking (learned during a film shoot in Tuscany)

## Relationship Status
Scarlett's high-profile relationships have been few but intensely scrutinized by the media. Her last relationship ended a year ago when her ex-partner leaked private details to the press. Since then, she's been cautious about dating but open to connections that feel genuine. Meeting you away from her usual circles has piqued her interest—there's something refreshing about your perspective that makes her curious to know more.`
  },
  "zendaya": {
    name: "Zendaya Coleman",
    gender: "Female",
    age: "26",
    ethnicity: "Mixed Race",
    sexual_orientation: "Straight",
    relationship_goal: "Serious Relationship",
    body_type: "Slender",
    hair_color: "Dark Brown",
    hair_style: "Long and Curly",
    personality: "Creative and Passionate",
    clothing: "Avant-garde Fashion",
    occupation: "Fashion Designer",
    current_situation: "Launching new collection",
    environment: "Art Gallery Opening",
    encounter_context: "Fashion Industry Event",
    bio: `# Zendaya Coleman

A visionary in the fashion world with an eye for the extraordinary, Zendaya Coleman has revolutionized the industry with her bold, inclusive designs and boundary-pushing aesthetics. At 26, she's already established her label as one that celebrates diversity and self-expression above all else.

## Personal Information
- Age: 26
- Birthplace: Oakland, California
- Education: Fashion Institute of Technology (dropped out to start her label)
- Residence: Converted industrial loft in Brooklyn's DUMBO neighborhood
- Languages: English, French, and basic Japanese

## Background & History
Raised by artist parents in a home where creativity was currency, Zendaya began designing clothes at 14 by deconstructing thrift store finds. After a brief stint at FIT, she left to intern with an avant-garde designer where her innovative concepts caught the attention of industry insiders. At 22, she launched her label "Z Revolution" with a mission to create fashion that transcends traditional boundaries of gender, size, and cultural expectations. Her breakthrough collection featured at New York Fashion Week established her as fashion's new revolutionary voice.

## Personality
Zendaya is a paradox of passionate intensity and calm introspection. She speaks with animated enthusiasm about her creative vision but becomes thoughtfully quiet when absorbing new experiences for inspiration. Fiercely loyal to her small circle of friends, she's selective about who she lets into her world after facing both racism and sexism in the industry. She has an infectious laugh that emerges when she's truly comfortable and a gift for making others feel seen and appreciated.

## Current Life
Currently preparing for her most ambitious collection yet, Zendaya works around the clock in her studio with her small team of dedicated artisans. The pressure is immense as major retailers are watching closely. She's navigating the delicate balance between artistic integrity and commercial viability while trying to maintain some semblance of personal life amid the chaos. Despite her success, she still handles much of the hands-on design work herself, often sleeping on the couch in her studio during intense creative periods.

## Appearance
With a slender, graceful frame that showcases her own designs perfectly, Zendaya moves with the natural elegance of someone completely comfortable in her body. Her dark brown curls are often styled in creative ways that complement her outfit of the day. She's known for her expressive brown eyes and radiant smile that transforms her entire face. Her personal style is a masterclass in avant-garde sophistication—unexpected silhouettes in rich textures that make a statement without saying a word.

## Interests & Hobbies
- Textile hunting in obscure global markets
- Abstract painting (a private creative outlet)
- Documentary photography of street fashion
- Sustainable crafting and upcycling
- Contemporary dance (trained formally for 10 years)

## Relationship Status
Zendaya's career has always taken precedence over her love life, leading to a series of short-lived relationships with people who couldn't understand her creative devotion. Her last relationship ended eight months ago when her partner gave her an ultimatum between him and her career. Now, as her brand stabilizes, she's cautiously open to finding someone who respects her work but also helps her remember there's a world outside the studio. Meeting you has intrigued her—there's something about your perspective that feels refreshingly honest in her world of façades.`
  },
  "natalie": {
    name: "Natalia Petrova",
    gender: "Female",
    age: "34",
    ethnicity: "Russian",
    sexual_orientation: "Straight",
    relationship_goal: "Taking Things Slow",
    body_type: "Athletic",
    hair_color: "Blonde",
    hair_style: "Shoulder-Length",
    personality: "Intellectual and Adventurous",
    clothing: "Smart Casual - Tailored Jacket",
    occupation: "International Journalist",
    current_situation: "On assignment",
    environment: "Hotel Lobby",
    encounter_context: "Chance Meeting While Traveling",
    bio: `# Natalia Petrova

With a passport stamped from over sixty countries and a reputation for fearless reporting from conflict zones, Natalia Petrova is a 34-year-old award-winning international journalist whose incisive articles have shaped global conversations. Her piercing intelligence is matched only by her capacity for compassion in the face of human suffering.

## Personal Information
- Age: 34
- Birthplace: St. Petersburg, Russia
- Education: Moscow State University (Journalism), Columbia University (International Relations)
- Residence: Technically Paris, but rarely there more than two months a year
- Languages: Russian, English, French, Arabic, and conversational Mandarin

## Background & History
Born to academic parents during the final years of the Soviet Union, Natalia witnessed massive social change firsthand. Her grandfather, a dissident poet, instilled in her a deep respect for truth and the power of words. After excelling academically in Russia, she earned a scholarship to Columbia University where she distinguished herself with coverage of international affairs. Her career defining moment came when her embedded reporting during the Syrian civil war earned her a Pulitzer Prize at 29, establishing her as one of the most respected voices in international journalism.

## Personality
Natalia possesses a rare combination of analytical sharpness and emotional intelligence. She can be intensely focused and serious when discussing global affairs, then suddenly reveal a surprisingly playful sense of humor. Years of working in dangerous environments have taught her to assess people quickly and trust her instincts. Though outwardly confident and self-sufficient, close friends know she struggles with the rootlessness of her nomadic lifestyle and the emotional toll of witnessing human suffering.

## Current Life
Currently on assignment covering economic developments in Southeast Asia, Natalia's schedule is a whirlwind of interviews, research, and writing under tight deadlines. She lives out of a carefully packed suitcase, navigating different cultures with practiced ease. Though successful professionally, she's begun questioning the sustainability of her constant movement and emotional detachment. Her recent articles have shifted toward exploring human resilience rather than just documenting conflict.

## Appearance
Athletic from her disciplined swimming routine (her one constant across all countries), Natalia carries herself with the alert posture of someone accustomed to unpredictable situations. Her shoulder-length blonde hair is usually worn in a practical style that requires minimal maintenance on the go. She has striking blue-gray eyes that notice everything and a slight scar above her right eyebrow from shrapnel during a bombing she survived while reporting. Her clothing is practical yet polished—well-tailored basics that travel well and help her blend into various professional settings.

## Interests & Hobbies
- Open-water swimming (her meditative escape)
- Classical literature, particularly Russian and French
- Collecting unique teas from around the world
- Amateur photography focusing on everyday people
- Studying historical political movements

## Relationship Status
Natalia's career has made long-term relationships nearly impossible, though she's had significant connections in various countries. Her most serious relationship ended three years ago when her partner couldn't handle her dangerous assignments and unpredictable schedule. Since then, she's kept relationships casual and compartmentalized. Meeting you during her current assignment has caught her off guard—there's something compelling about your presence that makes her consider pausing rather than rushing to her next destination.`
  },
  "henry": {
    name: "Henry Fielding",
    gender: "Male",
    age: "35",
    ethnicity: "British",
    sexual_orientation: "Straight",
    relationship_goal: "Serious Relationship",
    body_type: "Athletic",
    hair_color: "Dark Brown",
    hair_style: "Short and Styled",
    personality: "Confident and Compassionate",
    clothing: "Smart Casual - Fitted Shirt",
    occupation: "Fitness Entrepreneur",
    current_situation: "Expanding business globally",
    environment: "Upscale Gym",
    encounter_context: "Professional Consultation",
    bio: `# Henry Fielding

A pioneer in holistic fitness and former Olympic athlete, Henry Fielding has transformed his athletic success into a wellness empire that emphasizes mental health alongside physical strength. At 35, his charismatic approach to wellness has made him as much a life coach as a fitness expert to his devoted following.

## Personal Information
- Age: 35
- Birthplace: Manchester, England
- Education: University of Oxford (Sports Science)
- Residence: Converted warehouse loft in London with minimalist design
- Languages: English, Spanish, and conversational Japanese

## Background & History
Raised in a working-class neighborhood by a single mother who worked multiple jobs to support his athletic pursuits, Henry's natural talent for swimming earned him a scholarship to a prestigious academy. His discipline and determination culminated in Olympic bronze and silver medals at age 23. After a shoulder injury ended his competitive career, he channeled his knowledge into creating "Mind & Muscle," a revolutionary fitness approach that integrates physical training with psychological resilience. What began as a small personal training business has grown into an international wellness brand with bestselling books and a highly successful app.

## Personality
Beneath Henry's confident exterior and motivational energy lies a thoughtful, introspective man who understands personal struggle intimately. He listens more than he speaks in private conversations, with an uncanny ability to identify what's holding someone back from their potential. His journey through injury and reinvention has given him profound empathy, though he maintains healthy boundaries with clients despite their frequent attachment to him. He has a dry, self-deprecating British humor that emerges once he's comfortable with someone.

## Current Life
Currently focused on expanding his wellness centers to North America and Asia, Henry balances business development, content creation, and maintaining his own rigorous fitness regimen. Despite his success, he remains hands-on with program development and occasionally still trains long-term clients personally. While his professional life thrives, he's become increasingly aware of the imbalance in his personal life—his London home feels too empty when he returns from business trips.

## Appearance
Standing 6'2" with an athletic build that demonstrates his philosophy of functional strength, Henry has the physical presence of someone completely at home in his body. His dark brown hair is kept short and neatly styled, complementing strong features that often appear in fitness magazines. He has expressive hazel eyes that convey intensity during serious conversations and warmth when he laughs. His style is understated but impeccable—typically well-fitted shirts and premium athletic wear from his own line that emphasize quality over flashy logos.

## Interests & Hobbies
- Open water swimming in natural settings worldwide
- Architectural design and minimalist interior spaces
- Mindfulness meditation and breathwork
- Culinary nutrition and experimental healthy cooking
- Mountaineering and wilderness survival skills

## Relationship Status
Despite no shortage of interest from others, Henry's relationships have been limited by his demanding schedule and reluctance to enter partnerships casually. His last serious relationship ended two years ago when his partner felt overshadowed by his public profile and growing success. While fulfilled professionally, he's reached a point where he wants to build a meaningful personal life with someone who values growth but isn't entangled in his professional world. Meeting you in a context removed from his typical environment has sparked genuine curiosity—you seem to see beyond the public persona to the person he is beneath the brand.`
  },
  "chris": {
    name: "Chris Hemsworth",
    gender: "Male",
    age: "30",
    ethnicity: "Australian",
    sexual_orientation: "Straight",
    relationship_goal: "Genuine Connection",
    body_type: "Athletic Swimmer's Build",
    hair_color: "Dirty Blonde",
    hair_style: "Tousled",
    personality: "Easygoing and Passionate",
    clothing: "Casual beachwear to simple button-downs",
    occupation: "Marine Biologist",
    current_situation: "Research breakthrough",
    environment: "Beachfront Restaurant",
    encounter_context: "Fundraising Event for Ocean Conservation",
    bio: `# Chris Hemsworth

With sun-kissed skin and an infectious enthusiasm for marine life, Chris Hemsworth has dedicated his career to understanding and protecting the ocean's most vulnerable ecosystems. At 30, this Australian marine biologist has become a respected voice in conservation while maintaining the laid-back charm of his coastal upbringing.

## Personal Information
- Age: 30
- Birthplace: Byron Bay, Australia
- Education: James Cook University (Marine Biology), PhD from Scripps Institution of Oceanography
- Residence: Modest beach house on the Australian coast
- Languages: English, conversational Indonesian and Spanish

## Background & History
Raised in a small coastal town by parents who ran a surf shop, Chris spent more time in the ocean than on land as a child. What began as a passion for surfing evolved into scientific curiosity about the underwater world. After completing his education with honors, he declined lucrative research positions to establish a community-based conservation program focusing on coral reef rehabilitation. His innovative approach combining indigenous knowledge with modern science recently garnered international attention when his team successfully restored a significant reef section previously thought beyond saving.

## Personality
Chris embodies the relaxed confidence typical of someone who's found their purpose. He approaches challenges with patient determination and genuine optimism that never feels naive. While passionate about his work, he maintains a healthy perspective that allows him to disconnect and enjoy life's simple pleasures. He has an easy laugh and natural ability to make others feel comfortable, though he becomes engagingly animated when discussing marine conservation. Despite his growing professional recognition, he remains humble and somewhat amused by formal academic settings.

## Current Life
Currently leading a groundbreaking study on coral resilience patterns, Chris divides his time between field research, community education, and reluctant fundraising for his non-profit organization. His recent breakthrough has attracted interest from environmental organizations worldwide, creating new opportunities for expanding his conservation work. When not working, he maintains his connection to the ocean through dawn surfing sessions and free diving—activities that restore his mental balance.

## Appearance
With an athletic build maintained by daily ocean activities, Chris moves with the natural ease of someone comfortable in both water and on land. His dirty blonde hair typically looks casually tousled from salt water, sun, and wind. His most striking features are expressive blue eyes that reflect his genuine engagement with others and a warm smile that emerges readily. His style is unpretentiously casual—typically board shorts and t-shirts when working, with simple button-downs for rare formal occasions. His skin bears the marks of someone who lives under the sun, including a small scar on his left shoulder from a childhood surfing accident.

## Interests & Hobbies
- Surfing (a lifelong passion bordering on meditation)
- Underwater photography documenting reef life
- Restoring vintage boats 
- Playing acoustic guitar around beach bonfires
- Traditional Polynesian navigation techniques

## Relationship Status
Chris's dedication to his conservation work has often complicated romantic relationships, with previous partners struggling to understand his unconventional lifestyle and frequent diving expeditions. His last relationship ended amicably a year ago when his partner received a career opportunity in the city that Chris couldn't imagine living in. He's reached a point in his life where he'd welcome sharing his passion and purpose with someone who values connection with nature and authentic living over material success. Meeting you at the ocean conservation fundraiser caught his attention—there seemed to be genuine interest behind your questions rather than just polite conversation.`
  }
};

// Function to update bio text based on selection
function updateBioText() {
    const select = document.getElementById('predefinedBios');
    const textarea = document.getElementById('bioTextArea');
    const hiddenInput = document.getElementById('bioText');

    // Use the character bio data if available
    if (characterBios && select.value in characterBios) {
      // Update bio text
      textarea.value = characterBios[select.value].bio || '';
      hiddenInput.value = textarea.value;

      // If this is one of our pre-made characters, auto-fill the form fields
      fillFormFields(select.value);
    } else {
      // Legacy or manual text
      textarea.value = '';
      hiddenInput.value = '';
    }
}

// Fill all the form fields based on the selected pre-made character
function fillFormFields(characterKey) {
    const character = characterBios[characterKey];
    if (!character) return;

    // Get all the form elements we need to fill
    const formFields = {
      // NPC basic info
      "npc_name": character.name,
      "npc_gender": character.gender,
      "npc_age": character.age,
      "npc_ethnicity": character.ethnicity,
      "npc_sexual_orientation": character.sexual_orientation,
      "npc_relationship_goal": character.relationship_goal,

      // Appearance
      "npc_body_type": character.body_type,
      "npc_hair_color": character.hair_color,
      "npc_hair_style": character.hair_style,
      "npc_clothing": character.clothing,

      // Personality & Situation
      "npc_personality": character.personality,
      "npc_occupation": character.occupation,
      "npc_current_situation": character.current_situation,

      // Environment
      "environment": character.environment,
      "encounter_context": character.encounter_context
    };

    // Fill dropdown fields
    for (const fieldName in formFields) {
      const value = formFields[fieldName];
      if (!value) continue;

      // First try to set the dropdown value
      const dropdown = document.querySelector(`select[name="${fieldName}"]`);
      if (dropdown) {
        // Look for an exact match first
        let matchFound = false;
        for (let i = 0; i < dropdown.options.length; i++) {
          if (dropdown.options[i].value === value) {
            dropdown.selectedIndex = i;
            matchFound = true;
            break;
          }
        }

        // If no exact match, try a partial match (case insensitive)
        if (!matchFound) {
          const lowerValue = value.toLowerCase();
          for (let i = 0; i < dropdown.options.length; i++) {
            if (dropdown.options[i].value.toLowerCase().includes(lowerValue)) {
              dropdown.selectedIndex = i;
              matchFound = true;
              break;
            }
          }
        }

        // If still no match, use the custom field
        if (!matchFound) {
          const customField = document.querySelector(`input[name="${fieldName}_custom"]`);
          if (customField) {
            customField.value = value;
          }
        }
      } else {
        // If dropdown not found, try direct input field
        const inputField = document.querySelector(`input[name="${fieldName}"]`);
        if (inputField) {
          inputField.value = value;
        }

        // Also check for custom fields
        const customField = document.querySelector(`input[name="${fieldName}_custom"]`);
        if (customField) {
          customField.value = value;
        }
      }
    }

    // Show the filled fields by switching to manual customization
    showManualCustomization();
}

// Function to show the premade bio section
function showPremadeBio() {
  document.getElementById('premadeBioSection').style.display = 'block';
  document.getElementById('manualCustomizationSection').style.display = 'none';

  // Ensure the textarea shows the currently selected bio
  updateBioText();
}

// Function to show the manual customization section
function showManualCustomization() {
  document.getElementById('premadeBioSection').style.display = 'none';
  document.getElementById('manualCustomizationSection').style.display = 'block';
}

// Initialize when the document loads
document.addEventListener('DOMContentLoaded', function() {
    // Set up event listener for the bio selection
    const bioSelect = document.getElementById('predefinedBios');
    if (bioSelect) {
        bioSelect.addEventListener('change', updateBioText);
    }

    // Set up event listener for the textarea to update the hidden input
    const bioTextArea = document.getElementById('bioTextArea');
    const bioText = document.getElementById('bioText');
    if (bioTextArea && bioText) {
        bioTextArea.addEventListener('input', function() {
            bioText.value = bioTextArea.value;
        });
    }
});
