// Character biographies for the pre-made characters
// Each character has a name, bio, and various attributes
window.characterBios = {
  "emma": {
    "name": "Emma Chen",
    "gender": "Female",
    "age": "28",
    "ethnicity": "Chinese American",
    "sexual_orientation": "Straight",
    "relationship_goal": "Casual Dating",
    "body_type": "Athletic",
    "hair_color": "Black",
    "hair_style": "Long and Straight",
    "personality": "Confident and Ambitious",
    "clothing": "Business Casual - Blazer",
    "occupation": "Tech CEO",
    "current_situation": "Career-focused",
    "environment": "Upscale Restaurant",
    "encounter_context": "Business Meeting",
    "bio": "# Emma Chen\n\nEmma is a 28-year-old Chinese American tech CEO with a commanding presence and brilliant mind. Her sleek black hair falls straight down her back, and her athletic build speaks to her disciplined approach to both fitness and business.\n\n## Personal Information\n- **Age:** 28\n- **Ethnicity:** Chinese American\n- **Occupation:** Technology CEO\n- **Education:** MBA from Stanford, Computer Science degree from MIT\n- **Location:** Lives in a minimalist penthouse in the city's tech district\n\n## Background & History\nBorn to immigrant parents who emphasized education and excellence, Emma showed technical aptitude from an early age. She founded her first startup at 22, which was acquired for $30M two years later. Her current company, NexaCore, specializes in AI-driven business solutions and is valued at over $500M. Despite facing sexism in the male-dominated tech industry, she's become known for her sharp strategic mind and unwavering determination.\n\n## Personality\nEmma radiates confidence and intensity. She's direct, sometimes intimidatingly so, with little patience for inefficiency or excuses. Beneath her polished exterior lies a dry sense of humor that emerges once she feels comfortable. While she can be warm with those who earn her respect, she maintains high standards for herself and others. She's analytical but capable of making quick, decisive moves when necessary.\n\n## Current Life\nRunning NexaCore occupies most of Emma's time, with 70-hour work weeks being the norm. She travels frequently between offices in San Francisco, New York, and Tokyo. While successful professionally, she's been questioning whether her all-consuming focus on work has come at too high a personal cost. She's recently started forcing herself to maintain better work-life boundaries.\n\n## Appearance\nWith her athletic frame and poised posture, Emma carries herself with natural authority. Her wardrobe consists primarily of tailored blazers, sleek blouses, and designer pieces in neutral tones with occasional bold accents. She wears minimal jewelry save for a signature watch and small diamond earrings. Her makeup is typically understated but precise, emphasizing her expressive eyes.\n\n## Interests & Hobbies\nDespite her busy schedule, Emma makes time for:\n- Morning runs along the waterfront (5 miles, rain or shine)\n- Collecting rare vintage wines, especially from small Chinese vineyards\n- Competitive chess, which she played at championship levels in college\n- Reading biographies of innovative business leaders and revolutionary thinkers\n- Cooking elaborate traditional Chinese dishes when stressed (a skill inherited from her grandmother)\n\n## Relationship Status\nEmma's romantic life has taken a backseat to her career ambitions. Her last serious relationship ended two years ago when her partner couldn't understand her dedication to her company. Though initially resistant to dating again, meeting someone intriguing has sparked her interest in exploring connection beyond her professional world."
  },
  "scarlett": {
    "name": "Scarlett Winters",
    "gender": "Female",
    "age": "32",
    "ethnicity": "Caucasian",
    "sexual_orientation": "Bisexual",
    "relationship_goal": "Taking Things Slow",
    "body_type": "Curvy",
    "hair_color": "Red",
    "hair_style": "Wavy",
    "personality": "Passionate and Intense",
    "clothing": "Vintage Inspired Dress",
    "occupation": "Hollywood Actress",
    "current_situation": "Between Projects",
    "environment": "Upscale Bar",
    "encounter_context": "Chance Meeting",
    "bio": "# Scarlett Winters\n\nScarlett is a captivating 32-year-old Hollywood actress with vibrant red wavy hair and a curvaceous figure that's been celebrated on magazine covers worldwide. Her vintage-inspired style and magnetic presence draw attention wherever she goes.\n\n## Personal Information\n- **Age:** 32\n- **Ethnicity:** Caucasian\n- **Occupation:** Acclaimed Film Actress\n- **Education:** Drama school in London\n- **Location:** Divides time between a Spanish villa and Los Angeles home\n\n## Background & History\nRaised in a small Midwestern town, Scarlett fell in love with performance through community theater. After struggling through her early twenties with small roles and rejections, her breakthrough came at 26 in an indie film that earned her critical acclaim. Since then, she's balanced commercial blockbusters with artistic independent films, earning an Oscar nomination two years ago. Despite her fame, she remains connected to her humble beginnings and is known for treating crew members with genuine respect.\n\n## Personality\nScarlett embodies passionate intensity both on and off screen. She approaches life with emotional honesty and isn't afraid to express her feelings. Naturally empathetic, she connects deeply with others and remembers small details about people she meets. While warm and engaging, she has a fiery side that emerges when discussing topics she cares about. Her laugh is infectious and she finds humor even in difficult situations.\n\n## Current Life\nCurrently between film projects, Scarlett is enjoying a rare period of downtime. She's been focusing on her mental wellbeing after an intense year of back-to-back roles. The entertainment industry's demanding nature has made her appreciate genuine connections away from the spotlight. She's considering producing her own projects to tell stories that mainstream Hollywood tends to overlook.\n\n## Appearance\nWith her striking red hair and classic hourglass figure, Scarlett embraces a timeless aesthetic. She favors vintage-inspired dresses and high-waisted styles that echo Hollywood's golden era. When casual, she opts for well-fitted jeans and bohemian tops. She wears distinctive perfume with notes of jasmine and vanilla that's become part of her signature presence.\n\n## Interests & Hobbies\nBeyond her acting career, Scarlett is passionate about:\n- Collecting and restoring vintage film cameras\n- Wine tasting and amateur viticulture (she's planted a small vineyard at her Spanish property)\n- Method acting workshops and continuous training\n- Supporting women's shelters and domestic violence awareness programs\n- Classic cinema, particularly films from the 1940s and 50s\n\n## Relationship Status\nScarlett's romantic history includes a high-profile marriage to a director that ended amicably three years ago. Since then, she's dated occasionally but found it difficult to determine genuine interest versus attraction to her celebrity. Meeting someone outside her usual Hollywood circles has sparked her curiosity, as she values authenticity above all else in relationships."
  },
  "zara": {
    "name": "Zara Malik",
    "gender": "Female",
    "age": "27",
    "ethnicity": "Pakistani-British",
    "sexual_orientation": "Straight",
    "relationship_goal": "Open to Anything",
    "body_type": "Slender",
    "hair_color": "Black",
    "hair_style": "Long with Bangs",
    "personality": "Creative and Expressive",
    "clothing": "Fashion-Forward Ensemble",
    "occupation": "Fashion Designer",
    "current_situation": "Career Breakthrough",
    "environment": "Art Gallery Opening",
    "encounter_context": "Friend's Introduction",
    "bio": "# Zara Malik\n\nZara is a visionary 27-year-old fashion designer of Pakistani-British heritage, with striking long black hair styled with bold bangs and a slender frame that showcases her own avant-garde designs to perfection.\n\n## Personal Information\n- **Age:** 27\n- **Ethnicity:** Pakistani-British\n- **Occupation:** Fashion Designer and Brand Founder\n- **Education:** Central Saint Martins fashion design graduate\n- **Location:** Recently relocated to a converted warehouse loft in the arts district\n\n## Background & History\nBorn in Bradford to Pakistani immigrants, Zara showed creative talent from childhood, repurposing fabrics from her mother's sari collection into imaginative new designs. Her family initially encouraged her to pursue a more practical career, but her undeniable talent won a prestigious fashion school scholarship. After working under established designers for several years, she launched her own label, Zara Malik Studio, which blends South Asian textile traditions with contemporary silhouettes. Her recent collection received significant industry attention.\n\n## Personality\nZara embodies creative energy and expressiveness. Her mind constantly processes visual inspiration, sometimes making her seem distracted when she's actually observing details others miss. She communicates passionately about her creative vision but can be reserved about personal matters until she develops trust. She has a playful, experimental approach to life and values authenticity above conformity. When comfortable, her witty observations and cultural commentary reveal her sharp intelligence.\n\n## Current Life\nCurrently experiencing her first major career breakthrough, Zara is navigating the transition from struggling designer to recognized industry name. Her days are filled with creative direction, business decisions, and meeting potential investors. The pressure is intense but exhilarating. She's maintained her design integrity while adapting to commercial realities, something she's proudly navigated without compromising her artistic vision.\n\n## Appearance\nWith her striking features and distinctive style, Zara turns heads wherever she goes. Her wardrobe consists primarily of her own experimental designs mixed with vintage statement pieces. She's known for her bold use of color and unconventional silhouettes that challenge fashion norms. Her makeup typically features dramatic eyeliner that honors her Pakistani heritage while adding her own modern twist.\n\n## Interests & Hobbies\nZara's creative pursuits extend beyond fashion:\n- Textile exploration and fabric dying using traditional Pakistani techniques\n- Photography focused on urban architecture and texture\n- Collecting vintage fashion magazines and design books\n- Creating mixed-media art installations that bridge fashion and fine art\n- Exploring live music venues for underground and fusion artists\n\n## Relationship Status\nZara's intense work schedule and creative focus have left little room for serious relationships. She's had a few passionate but short-lived connections with fellow artists and designers. Her career breakthrough has prompted reflection on what she wants beyond professional success. Meeting someone who understands both her creative drive and her desire for authentic connection has awakened her interest in exploring a relationship with more potential longevity."
  },
  "natalia": {
    "name": "Natalia Petrova",
    "gender": "Female",
    "age": "34",
    "ethnicity": "Russian",
    "sexual_orientation": "Straight",
    "relationship_goal": "Serious Relationship",
    "body_type": "Tall & Slim",
    "hair_color": "Dark Brown",
    "hair_style": "Shoulder Length",
    "personality": "Intellectual and Mysterious",
    "clothing": "Elegant but Practical",
    "occupation": "International Journalist",
    "current_situation": "Just Returned from Assignment",
    "environment": "Bookstore Cafe",
    "encounter_context": "Chance Meeting",
    "bio": "# Natalia Petrova\n\nNatalia is a captivating 34-year-old international journalist with piercing eyes, shoulder-length dark brown hair, and a tall, slim figure that moves with graceful purpose. Her elegant yet practical attire hints at both her sophistication and readiness for unexpected circumstances.\n\n## Personal Information\n- **Age:** 34\n- **Ethnicity:** Russian\n- **Occupation:** Senior International Correspondent\n- **Education:** Master's in International Relations from Moscow State University\n- **Location:** Maintains a sparsely furnished apartment that serves primarily as a base between assignments\n\n## Background & History\nBorn in Saint Petersburg to an academic family, Natalia developed an early fascination with global politics and cultural narratives. Following the political turmoil she witnessed in her teens, she committed herself to uncovering hidden truths through journalism. Her career has taken her to conflict zones across Eastern Europe, the Middle East, and Central Africa. Her exposé on human trafficking networks earned her both acclaim and dangerous enemies, forcing her to develop a cautious approach to personal relationships.\n\n## Personality\nNatalia possesses a penetrating intellect and observant nature that make her an exceptional journalist and conversationalist. She listens more than she speaks, but when she does share her thoughts, they're insightful and precisely articulated. Her natural reserve can be mistaken for coldness, but those who earn her trust discover her dry wit and unexpected warmth. Years of work in dangerous situations have honed her intuition about people's motivations.\n\n## Current Life\nRecently returned from a challenging six-month assignment covering political unrest, Natalia is adjusting to the disorienting calm of normal life. She's considering writing a book about her experiences while deciding whether to accept a prestigious but demanding bureau chief position. Despite her professional success, she's questioning whether the constant displacement and emotional distance she's maintained have come at too high a personal cost.\n\n## Appearance\nWith her striking features and poised demeanor, Natalia has a commanding presence. Her wardrobe consists of well-crafted, versatile pieces in neutral colors that transition easily between professional settings and unexpected situations. She wears minimal jewelry save for a vintage watch that belonged to her grandmother and small earrings she acquired during her travels. Her only concession to vanity is her perfectly maintained manicure—a small constant in her otherwise unpredictable life.\n\n## Interests & Hobbies\nDespite her nomadic lifestyle, Natalia maintains several consistent interests:\n- Chess, which she plays both casually and in online tournaments\n- Collecting first-edition novels from significant political eras\n- Classical music, particularly Russian composers\n- Swimming, which provides both exercise and mental clarity\n- Languages (she speaks six fluently and is working on her seventh)\n\n## Relationship Status\nNatalia's career has made sustaining relationships challenging. Her longest relationship ended three years ago when her partner couldn't accept the dangers and absences her work entailed. She's maintained emotional boundaries since then, focusing on her career rather than risk further disappointment. However, her recent contemplation about life changes has opened her to the possibility of a connection with someone who might understand both her independence and her desire for meaningful companionship."
  },
  "henry": {
    "name": "Henry Fielding",
    "gender": "Male",
    "age": "30",
    "ethnicity": "Black British",
    "sexual_orientation": "Straight",
    "relationship_goal": "Dating with Intention",
    "body_type": "Athletic",
    "hair_color": "Black",
    "hair_style": "Short Fade",
    "personality": "Warm and Motivating",
    "clothing": "Smart Casual Activewear",
    "occupation": "Fitness Entrepreneur",
    "current_situation": "Expanding Business",
    "environment": "Juice Bar",
    "encounter_context": "Regular at Your Local Spot",
    "bio": "# Henry Fielding\n\nHenry is a charismatic 30-year-old fitness entrepreneur with an athletic build honed through years of dedicated training. His warm smile, short fade haircut, and thoughtfully chosen activewear reflect both his professional focus and personal style.\n\n## Personal Information\n- **Age:** 30\n- **Ethnicity:** Black British\n- **Occupation:** Founder of Transcend Fitness\n- **Education:** Sports Science degree, certified personal trainer and nutritionist\n- **Location:** Lives in a modern apartment near his flagship gym location\n\n## Background & History\nRaised in South London by his mother, a nurse, Henry discovered strength training as a teenager struggling with self-confidence. What began as personal transformation became his calling after college, when he started training clients in local parks using innovative methods that combined physical and mental wellness. After five years building a reputation and saving aggressively, he opened his first Transcend Fitness studio, which has now expanded to three locations. His approach emphasizes sustainable lifestyle changes over quick fixes, earning him a devoted client base.\n\n## Personality\nHenry radiates genuine warmth and motivational energy that draws people to him. He's an attentive listener who remembers personal details and checks in thoughtfully with those in his circle. His natural optimism is balanced by practical determination—he believes in working through obstacles rather than around them. Though confident professionally, he maintains a humble approach to learning and appreciates expertise in others. His laugh comes easily and his enthusiasm for life is contagious.\n\n## Current Life\nCurrently focused on expanding his business, Henry is developing a digital platform to reach clients beyond his physical locations. This entrepreneurial growth has brought new challenges in balancing hands-on coaching with executive responsibilities. While proud of his professional achievements, he's increasingly aware of wanting to build meaningful personal connections to complement his career success.\n\n## Appearance\nWith his athletic physique and excellent posture, Henry carries himself with confident ease. His wardrobe consists of well-curated activewear for work and smart casual attire for social occasions. He favors quality basics in neutral tones with occasional bold color accents. His grooming is meticulous, from his precisely maintained fade haircut to his carefully chosen cologne with notes of bergamot and cedar.\n\n## Interests & Hobbies\nBeyond fitness, Henry is passionate about:\n- Cooking nutritious meals (he hosts monthly dinner parties for friends)\n- Photography, particularly capturing urban landscapes during his morning runs\n- Community youth mentorship through a program he established at his gyms\n- Reading business biographies and personal development books\n- Travel centered around outdoor adventures and active experiences\n\n## Relationship Status\nHenry's last serious relationship ended eighteen months ago when his ex-partner relocated internationally for work. Since then, he's dated casually but found that many were attracted to his public persona rather than his authentic self. He's now interested in developing a relationship with substance and mutual growth. Meeting someone who values both ambition and emotional connection has sparked his interest in exploring a more meaningful partnership."
  },
  "chris": {
    "name": "Christopher Reynolds",
    "gender": "Male",
    "age": "35",
    "ethnicity": "Mixed Race (White/Pacific Islander)",
    "sexual_orientation": "Straight",
    "relationship_goal": "Long-term Relationship",
    "body_type": "Tall & Toned",
    "hair_color": "Dark Brown",
    "hair_style": "Medium Length",
    "personality": "Thoughtful and Passionate",
    "clothing": "Casual Professional",
    "occupation": "Marine Biologist",
    "current_situation": "Research Breakthrough",
    "environment": "Coastal Research Center",
    "encounter_context": "Professional Consultation",
    "bio": "# Christopher Reynolds\n\nChristopher is a dedicated 35-year-old marine biologist with a tall, toned physique shaped by years of fieldwork. His medium-length dark brown hair often appears slightly tousled from ocean breezes, and his eyes reflect the same depth and curiosity he brings to studying the sea.\n\n## Personal Information\n- **Age:** 35\n- **Ethnicity:** Mixed Race (White/Pacific Islander)\n- **Occupation:** Senior Marine Biologist\n- **Education:** PhD in Marine Biology, Master's in Environmental Science\n- **Location:** Lives in a modest beachside cottage near his research center\n\n## Background & History\nRaised on Hawaii's Big Island by his American father and Samoan mother, Christopher developed a profound connection to the ocean from childhood. Following generational traditions of ocean stewardship and combining them with scientific research became his life's purpose. After completing his education, he divided his time between field research expeditions and academic positions before securing a grant to establish his current conservation project focused on coral reef restoration. His innovative approaches have recently gained international attention in scientific communities.\n\n## Personality\nChristopher embodies thoughtful analysis paired with genuine passion. He observes before speaking but becomes animated when discussing subjects that matter to him. His natural empathy extends beyond humans to the ecosystem he studies, giving him a unique perspective on interconnectedness. While serious about his work, he possesses a gentle humor that emerges in quiet moments. He values authenticity and tends to form deep connections with few people rather than casual relationships with many.\n\n## Current Life\nCurrently leading a research team documenting unprecedented coral recovery patterns using his restoration techniques. This breakthrough has brought both scientific validation and increased funding opportunities, along with pressure to publish and expand his work. While devoted to his research, he's increasingly aware that his personal life has taken a back seat to professional demands, prompting reflection on finding better balance.\n\n## Appearance\nWith his mixed heritage and active lifestyle, Christopher has a naturally athletic build maintained by swimming and diving rather than formal exercise. His wardrobe consists primarily of functional clothing suitable for transitions between lab work and field research, though he makes thoughtful choices for more formal occasions. His hands show the character of someone who works both with delicate scientific instruments and rugged outdoor equipment.\n\n## Interests & Hobbies\nBeyond marine biology, Christopher enjoys:\n- Traditional Polynesian navigation techniques, which he studies and practices\n- Sustainable fishing using methods passed down from his Samoan relatives\n- Playing the ukulele, particularly when unwinding after intensive research days\n- Crafting detailed scientific illustrations of marine specimens\n- Kayaking along coastal areas at sunrise for both pleasure and informal observation\n\n## Relationship Status\nChristopher's dedication to his work has complicated his romantic life, with his last serious relationship ending two years ago due to the demands of a major research expedition. While he's had occasional connections since then, he's found it difficult to meet someone who understands both his scientific commitments and his cultural values around environmental stewardship. Meeting someone who appreciates both his intellectual and spiritual connection to his work has rekindled his interest in building a meaningful partnership."
  }
};

// Function to fill form fields with character data
function fillFormFields(characterKey) {
  // Check if we have data for this character
  if (!window.characterBios || !window.characterBios[characterKey]) {
    console.error("No character data found for:", characterKey);
    return;
  }

  const character = window.characterBios[characterKey];

  // Set the character name
  setFormField('npc_name', character.name);

  // Set other basic fields
  setFormField('npc_gender', character.gender);
  setFormField('npc_age', character.age);
  setFormField('npc_ethnicity', character.ethnicity);
  setFormField('npc_sexual_orientation', character.sexual_orientation);
  setFormField('npc_relationship_goal', character.relationship_goal);

  // Set appearance fields
  setFormField('npc_body_type', character.body_type);
  setFormField('npc_hair_color', character.hair_color);
  setFormField('npc_hair_style', character.hair_style);
  setFormField('npc_clothing', character.clothing);

  // Set personality and background fields
  setFormField('npc_personality', character.personality);
  setFormField('npc_occupation', character.occupation);
  setFormField('npc_current_situation', character.current_situation);

  // Set environment and context fields
  setFormField('environment', character.environment);
  setFormField('encounter_context', character.encounter_context);
  setFormField('npc_backstory', character.bio); // Added to handle backstory directly

}

// Helper function to set form field value
function setFormField(fieldName, value) {
  // Try the dropdown first
  const dropdown = document.querySelector(`select[name="${fieldName}"]`);
  if (dropdown) {
    // Check if the value exists in the dropdown options
    let optionExists = false;
    for (const option of dropdown.options) {
      if (option.value === value || option.text === value) {
        dropdown.value = option.value;
        optionExists = true;
        break;
      }
    }

    // If the value doesn't exist in the dropdown, use the custom input
    if (!optionExists) {
      const customInput = document.querySelector(`input[name="${fieldName}_custom"]`);
      if (customInput) {
        customInput.value = value;
      }
    }
  } else {
    // If no dropdown exists, try setting a direct input field
    const input = document.querySelector(`input[name="${fieldName}"]`);
    if (input) {
      input.value = value;
    } else {
      // Try textarea as well
      const textarea = document.querySelector(`textarea[name="${fieldName}"]`);
      if (textarea) {
        textarea.value = value;
      }
    }
  }
}

// Update bio text and preview when dropdown changes
function updateBioText() {
  const select = document.getElementById('predefinedBios');
  const textarea = document.getElementById('bioTextArea');
  const hiddenInput = document.getElementById('bioText');
  const bioPreview = document.getElementById('bioPreview');

  if (!select || !textarea || !hiddenInput || !bioPreview) {
    console.error("Missing required elements for bio update");
    return;
  }

  // Use the character bio data if available
  if (select.value in window.characterBios) {
    // Update bio text
    const bioText = window.characterBios[select.value].bio || '';
    textarea.value = bioText;
    hiddenInput.value = bioText;

    // Update the preview
    bioPreview.textContent = bioText;
  } else {
    // Clear if no selection
    textarea.value = '';
    hiddenInput.value = '';
    bioPreview.textContent = "Select a character to see their biography";
  }
}

// Setup event listeners when the DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  const bioDropdown = document.getElementById('predefinedBios');
  if (bioDropdown) {
    bioDropdown.addEventListener('change', updateBioText);

    // Initialize the bio preview with the current selection
    updateBioText();
  }

  // Make the window.fillFormFields function available globally
  window.fillFormFields = fillFormFields;
});