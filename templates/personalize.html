{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">Personalizations</h1>
<form method="POST" class="row g-3">

  <div class="col-12">
    <h3>User Personalizations</h3>
  </div>
  <div class="col-md-6">
    <label class="form-label">Name</label>
    <select class="form-select" name="user_name">
      <option value="">--Select--</option>
      {% for opt in user_name_options %}
        <option value="{{ opt }}">{{ opt }}</option>
      {% endfor %}
    </select>
    <label class="form-label mt-1">Or custom:</label>
    <input type="text" class="form-control" name="user_name_custom">
  </div>
  <div class="col-md-6">
    <label class="form-label">Age</label>
    <select class="form-select" name="user_age">
      <option value="">--Select--</option>
      {% for age in user_age_options %}
        <option value="{{ age }}">{{ age }}</option>
      {% endfor %}
    </select>
    <label class="form-label mt-1">Or custom:</label>
    <input type="text" class="form-control" name="user_age_custom">
  </div>

  <div class="col-md-6">
    <label class="form-label mt-2">Personality</label>
    <select class="form-select" name="user_personality">
      <option value="">--Select--</option>
      <!-- Insert or rely on custom -->
    </select>
    <label class="form-label mt-1">Or custom:</label>
    <input type="text" class="form-control" name="user_personality_custom">
  </div>
  <div class="col-md-6">
    <label class="form-label mt-2">Background</label>
    <textarea class="form-control" name="user_background" rows="2"></textarea>
  </div>

  <hr class="my-4">
  <div class="col-12">
    <h3>Romantic Interest Personalizations</h3>
  </div>
  <!-- (NPC fields, same pattern) -->

  <hr class="my-4">
  <div class="col-12">
    <h3>Location / Encounter Context</h3>
  </div>
  <div class="col-md-6">
    <label class="form-label">Physical Location / Environment</label>
    <select class="form-select" name="environment">
      <option value="">--Select--</option>
      {% for opt in environment_options %}
        <option value="{{ opt }}">{{ opt }}</option>
      {% endfor %}
    </select>
    <label class="form-label mt-1">Or custom:</label>
    <input type="text" class="form-control" name="environment_custom">
  </div>
  <div class="col-md-6">
    <label class="form-label">Encounter Context</label>
    <select class="form-select" name="encounter_context">
      <option value="">--Select--</option>
      {% for opt in encounter_context_options %}
        <option value="{{ opt }}">{{ opt }}</option>
      {% endfor %}
    </select>
    <label class="form-label mt-1">Or custom:</label>
    <input type="text" class="form-control" name="encounter_context_custom">
  </div>

  <hr class="my-4">
  <div class="col-12">
    <h4>Image Generation Settings</h4>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="use_single_seed" value="yes">
      <label class="form-check-label">
        Use the same seed for all images (consistent style)
      </label>
    </div>
  </div>

  <div class="col-12 mt-4">
    <button type="submit" name="save_personalization" value="true" class="btn btn-primary btn-lg">
      Save & Next
    </button>
  </div>
</form>
{% endblock %}