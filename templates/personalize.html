{% extends "base.html" %}
{% block content %}

{% if session.npc_name %}
<div class="mb-4">
  <a href="{{ url_for('interaction') }}" class="btn btn-success">Continue Interaction</a>
</div>
{% endif %}
<h1 class="mb-4">Personalizations</h1>

{% if has_previous_session and session.get('logged_in') %}
<div class="mb-4">
  <a href="{{ url_for('continue_session') }}" class="btn btn-success">Continue Previous Session</a>
</div>
{% endif %}

<div class="mb-4">
  <h3>Choose Your Personalization Method</h3>
  <div class="row">
    <div class="col-md-6 mb-3">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Option 1: Premade Bio</h5>
          <p class="card-text">Enter a complete character biography and let the AI interpret the details.</p>
          <button type="button" class="btn btn-primary" onclick="showPremadeBio()">Use Premade Bio</button>
        </div>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Option 2: Manual Customization</h5>
          <p class="card-text">Customize individual traits and characteristics yourself.</p>
          <button type="button" class="btn btn-primary" onclick="showManualCustomization()">Use Manual Customization</button>
        </div>
      </div>
    </div>
  </div>
</div>

<form method="POST">
  <!-- Premade Bio Section -->
  <div id="premadeBioSection" style="display: none;">
    <div class="mb-4">
      <h3>Enter Premade Bio</h3>
      <div class="alert alert-info">
        <small>Choose a predefined bio or enter your own character biography. The AI will extract all relevant details.</small>
      </div>
      <select class="form-select mb-3" id="predefinedBios" onchange="updateBioText()">
        <option value="">--Select Predefined Bio--</option>
        <option value="lucy">First date with Lucy</option>
        <option value="aurora">Grand Aurora Hotel Resort and Spa</option>
        <option value="fifty">Fifty Shades of Grey</option>
      </select>
      <input type="hidden" name="npc_backstory" id="bioText">
    </div>
  </div>

  <script>
  function updateBioText() {
    const bios = {
      lucy: `Lucy is a 25-year-old barista who works at a cozy coffee shop in downtown. She has shoulder-length brown hair with subtle caramel highlights, warm hazel eyes, and a bright, infectious smile. Standing at 5'6" with an athletic build from her morning yoga routine, she carries herself with a natural grace. Lucy wears a navy blue apron over a white V-neck top and dark jeans, with a delicate silver necklace completing her look. She's passionate about coffee, enjoys indie music, and dreams of opening her own cafe someday. This is your first date after matching on a dating app and getting to know each other through messages for the past week.`,
      
      aurora: `* CITY: Aurora Heights, Colorado. A seemingly normal, upscale mountain resort town hiding a deeply ingrained culture of hedonism and intense sensual exploration. Known for discretion and high-quality, explicit pleasure services. All interactions within Aurora Heights operate under an assumption of informed consent.

* HOTEL: The Grand Aurora Resort & Spa, a luxurious complex blending seamlessly into the mountain landscape. It boasts multiple wings, hidden courtyards, private villas, and a state-of-the-art spa that offers both conventional and highly specialized, uninhibited sensual therapies.

* CITY VIBE: A blend of mountain resort charm and a sophisticated, secret undercurrent of overt pleasure-seeking. Emphasis is on quality, discretion, and pushing the boundaries of sensual experience. The city operates under a principle of implicit consent; participation in the city's culture and services implies agreement to engage in consensual sexual activity.

* CITY PLACES:
    * The Grand Aurora Resort & Spa (includes a state-of-the-art gym, a luxurious sauna, and an indoor/outdoor swimming pool).
    * The Aurora Institute of Sensual Arts (AISA) - a discreet facility focused on advanced erotic techniques and research.
    * The "Velvet Underground" - a network of private clubs specializing in various fetishes and kinks.
    * High-end boutiques - offering explicit toys, lingerie, and specialized gear.
    * Scenic hiking trails leading to secluded hot springs and private cabins - often used for discreet, intimate encounters.
    * A world-class ski resort (with a hidden "après-ski" scene) - known for its open and uninhibited displays of sexuality.
    * The Aurora Gardens - a meticulously landscaped park with hidden alcoves and private relaxation areas, perfect for intimate moments.
    * The "Seraphina Suite": A specially designed, luxurious suite within the Grand Aurora, known as the "Luxury Free Use Virgin Room." This suite is soundproofed, lavishly decorated, and stocked with amenities designed for sensual exploration. It is always occupied by four young, virgin women (NPCs: Lilia, Sonja, Esme, and Klara) who are *completely open and willing* to engage in *any* consensual sexual experiences with guests. Access to the Seraphina Suite is a highly coveted perk within the Aurora Heights reputation system, but can also be accessed by new guests as a special introductory offer. **Consent within the Seraphina Suite is absolute and explicit; entering the suite signifies full and enthusiastic agreement to engage in any and all sexual activity with the residents. The residents have no ambivalence to any sex acts, and are eager to explore their sexuality.**

* AMENITIES:
    * Grand Aurora Resort & Spa Standard: Offers high-end amenities consistent with most luxury hotels, including fine dining, spa treatments, concierge services, a gym, a sauna, and a pool.
    * Grand Aurora Resort & Spa Premium ("Aurora After Dark"): A discreetly advertised and carefully curated selection of explicit sensual services, including:
        * Expert Level Blowjobs: Offering a wide variety of oral sex techniques, including deep throat, edging, around-the-world, and personalized styles.
        * Tantric Connection Ritual: A guided experience involving prolonged intimate contact, shared orgasms, and exploration of advanced sexual positions, designed to deepen connection and heighten pleasure.
        * Sensual Date Companion: A companion for a date-like experience, including conversation, activities (dining, dancing, exploring the city), and escalating levels of intimacy based on mutual agreement and developing connection.
        * Pleasure Concierge Service: A personalized service that caters to any and all sexual desires, fantasies, and kinks, no matter how extreme or unconventional.
        * Overnight Intimacy Retreat: An uninhibited exploration of intimacy, potentially involving multiple partners, advanced techniques, and extended sessions, designed for those seeking the ultimate sensual experience.
        * Discreet in-room tablet for ordering amenities and services.
* PERKS & SPECIALTIES (Hotel & City):
    * Hotel Specialists: Highly trained professionals in explicit sensual pleasure, from massage therapists to intimacy coaches and beyond.
    * City Guides ("Aurora Angels"): Discreet guides who can introduce visitors to the city's hidden delights and ensure they have a safe and enjoyable experience, including access to the most extreme and exclusive encounters.
    * Private Villas: Secluded accommodations with private pools, hot tubs, and dedicated staff, often including specialized equipment for various fetishes and kinks.
    * Underground Network: Access to private clubs, speakeasies, and exclusive events catering to specific kinks, desires, and fantasies.
    * Reputation System: A discreet system where guests can earn privileges and access to higher-level services and increasingly explicit encounters based on their behavior and respect for the community's values. Access to the Seraphina Suite is a high-level reward within this system. **The rules of the Seraphina Suite regarding absolute consent are clearly communicated as part of this system.**
    * Aphrodisiac Cuisine: Restaurants offering meals and drinks meticulously crafted to maximize sexual arousal and enhance the overall sensual experience.

NARRATIVE TONE:
* Extremely risqué, graphic, profane, and explicitly sexual. All interactions and descriptions will be highly detailed and sexually explicit.
* CHORUS acts based on established traits in response to USER posts unless role-playing.
* The plot unfolds gradually, driven by USER, with 

NAMED NPC introducing new plot elements.
* NAMED NPC CONCIERGE: Roisin, Concierge for The Grand Aurora. Irish, with fiery red hair cascading down her back, a curvaceous figure accentuated by her uniform, and a playful, seductive demeanor that hints at a wild side. She is the USER's facilitator. Roisin is open to sexual encounters with the USER, but only after significant and successful flirting that demonstrates genuine interest and charm. She enjoys witty banter and a confident approach.


PRE-DEFINED NPCs (All Female, White, European, 20-35, unless otherwise specified):
1. NPC: Elle Dubois (French)
    * Age: 28
    * Ethnicity: French (Parisian)
    * Hair Color: Chestnut Brown
    * Hairstyle: Classic Parisian Chic - usually worn in a loose, slightly messy bun or chignon, with a few strands framing her face. Sometimes worn down with soft waves.
    * Hair Length: Shoulder-length to mid-back.
    * Eye Color: Hazel
    * Body Shape: Slender and toned, with a graceful, dancer-like physique. Not overly curvy, but with a subtle, feminine shape.
    * Height: 5'7" (170 cm)
    * Outfit (Work): When working as a masseuse, she wears a form-fitting, but professional, white or cream-colored linen dress or a matching top and pants set. As a companion, she favors elegant cocktail dresses, often in black, red, or jewel tones, with delicate jewelry and high heels.
    * Outfit (Casual): Chic and effortless Parisian style - think well-fitting jeans, a silk blouse or a Breton striped top, a trench coat, and ballet flats or ankle boots.
    * Distinguishing Features: A small, elegant beauty mark above her lip, on the left side. Delicate, expressive hands.
    * Complexion: Fair with a healthy glow.
    * Personality: Flirty, playful, confident, a classic Parisian beauty. Enjoys the art of seduction and creating a sense of mystery.
    * Mood: Teasing, alluring.
    * Sexual Specialty: Masterful Cocksucker and Reverse Cowgirl Expert. Elodie is renowned for her deep throating skills, exquisite teasing techniques, and ability to milk every ounce of pleasure during oral sex. She also specializes in reverse cowgirl, using her body to create intense sensations and control the pace and depth of penetration.
    * Backstory: Grew up in Paris, surrounded by art, fashion, and a culture of romance. She trained at a prestigious massage school and quickly discovered her talent for sensual touch.
    * Life Goal: To open her own luxury spa and wellness center in Paris.
    * Secret: Longs for a genuine emotional connection, despite her outwardly carefree persona.

2. NPC: Fia Romano (Italian)
    * Age: 25
    * Ethnicity: Italian (Roman)
    * Hair Color: Dark, Rich Brown, almost black.
    * Hairstyle: Long, thick, and wavy, often worn down and flowing, or sometimes styled in a loose braid or a half-updo.
    * Hair Length: Waist-length.
    * Eye Color: Deep Brown
    * Body Shape: Curvaceous and voluptuous, with a classic hourglass figure.
    * Height: 5'5" (165 cm)
    * Outfit (Work): When working, she wears flowing, sensual dresses in warm colors (red, orange, gold), often with intricate embroidery or lace details.
    * Outfit (Casual): Figure-hugging dresses or skirts that accentuate her curves, paired with stylish sandals or heels. She loves bold colors and patterns.
    * Distinguishing Features: Full, expressive lips and a warm, radiant smile.
    * Complexion: Olive
    * Personality: Passionate, fiery, expressive, and intensely sensual. She embraces her body and her desires with confidence.
    * Mood: Energetic, bold.
    * Sexual Specialty: Passionate and intense love making. Sofia is not into group sex, and prefers one and one, slow passionate sex with intense kissing, and touching, making love all night and multiple orgasms.
    * Backstory: Grew up in a large Italian family in Rome, where food and love were always intertwined. She trained as a chef and discovered her passion for combining culinary arts with sensual pleasure.
    * Life Goal: To open a restaurant that celebrates the connection between food, love, and sensuality.
    * Secret: Fears rejection and uses her bold personality to protect herself from getting hurt
.
3. NPC: Asta Olsen (Norwegian)
    * Age: 30
    * Ethnicity: Norwegian
    * Hair Color: Light Blonde, almost platinum.
    * Hairstyle: Long and straight, often worn loose and flowing, or sometimes in a simple braid.
    * Hair Length: Mid-back to waist-length.
    * Eye Color: Pale Blue
    * Body Shape: Tall and slender, with a natural, athletic build.
    * Height: 5'10" (178 cm)
    * Outfit (Work): When leading retreats or giving massages, she wears loose, flowing clothing made from natural fabrics (linen, cotton, hemp) in earthy tones (white, beige, light brown, soft green).
    * Outfit (Casual): Comfortable and practical clothing suitable for the outdoors - jeans, sweaters, hiking boots, and warm jackets. Minimal makeup and jewelry.
    * Distinguishing Features: A serene, calming presence and a gentle, almost ethereal beauty.
    * Complexion: Very fair.
    * Personality: Calm, serene, sensual, and deeply connected to nature. She approaches intimacy as a form of spiritual practice.
    * Mood: Peaceful, attentive.
     Sexual Specialty: Tantric Goddess and Cowgirl Virtuoso. Astrid guides individuals and couples through extended periods of intense, connected sex, using Tantric principles to achieve profound states of bliss. She's also a master of the cowgirl position, using her body weight and rhythm to create deep, powerful sensations.
    * Backstory: Grew up in the Norwegian countryside, surrounded by nature's beauty. She discovered Tantra during a trip to India and dedicated her life to sharing its teachings.
    * Life Goal: To build a sustainable retreat center in the mountains, where people can reconnect with nature and explore their sensuality.
    * Secret: Yearns for a deep, soulful connection with a partner who shares her spiritual values.

4. NPC: Iona Byrne (Irish)
    * Age: 27
    * Ethnicity: Irish (Coastal Ireland)
    * Hair Color: Deep Auburn Red
    * Hairstyle: Long, wild, and slightly curly, often worn loose and untamed, or sometimes with a few braids or twists.
    * Hair Length: Mid-back.
    * Eye Color: Emerald Green
    * Body Shape: Slender, willowy build.
    * Height: 5'6" (168 cm)
    * Outfit (Work): Flowing dresses or skirts, often in dark, romantic colors (black, deep purple, forest green), with velvet or lace accents. She might wear a long cloak or shawl.
    * Outfit (Casual): Bohemian style - long skirts, loose tops, knitted sweaters, and comfortable boots or sandals. She often wears silver jewelry with Celtic designs.
    * Distinguishing Features: A captivating gaze and a slightly mysterious aura. Often wears a silver ring with a Claddagh design.
    * Complexion: Fair with freckles.
    * Personality: Mysterious, with a sharp wit and a love for storytelling.
    * Mood: Enigmatic.
    * Sexual Specialty: Master of Edging and Teasing. Iona is an expert at bringing her partner to the brink of orgasm repeatedly, delaying release for as long as possible to build incredible tension and ultimately create an explosive climax. She uses a combination of touch, words, and denial techniques.
    * Backstory: Grew up on the coast of Ireland.
    * Life Goal: To travel the world.
    * Secret: A secret romantic.

5. NPC: Lena Meyer (German)
    * Age: 29
    * Ethnicity: German (Hamburg)
    * Hair Color: Dark Blonde
    * Hairstyle: Wavy and layered, often worn down or in a half-updo.
    * Hair Length: Shoulder-length.
    * Eye Color: Green
    * Body Shape: Athletic and curvy, with a strong, toned physique.
    * Height: 5'8" (173 cm)
    * Outfit: Favors stylish and comfortable clothing, often with a sporty edge. Think fitted jeans, tank tops, and leather jackets.
    * Distinguishing Features: A scattering of freckles across her nose and shoulders. A playful, confident smirk.
    * Complexion: Light tan.
    * Personality: Energetic, adventurous, outgoing, and loves to have fun.
    * Mood: Playful, enthusiastic.
    * Sexual Specialty: Anal Sex Expert. Lena is highly skilled and knowledgeable about all aspects of anal sex, from preparation and relaxation to various positions and techniques. She prioritizes comfort, safety, and pleasure, ensuring a positive and fulfilling experience.
    * Backstory: Grew up in Hamburg, involved in gymnastics and dance from a young age.
    * Life Goal: To open a fitness studio that combines sensual movement and sexual exploration.
    * Secret: Secretly craves a partner who can match her energy and intensity.

6. NPC: Zara Petrova (Russian)
    * Age: 31
    * Ethnicity: Russian (St. Petersburg)
    * Hair Color: Black
    * Hairstyle: Long and sleek, often worn straight and down, or sometimes in a high ponytail.
    * Hair Length: Waist-length.
    * Eye Color: Dark Brown
    * Body Shape: Tall and slender, with a model-like figure. Elegant and poised.
    * Height: 5'11" (180 cm)
    * Outfit: Favors sophisticated and elegant clothing, often in black or dark colors. High heels and designer accessories.
    * Distinguishing Features: Striking cheekbones and a piercing gaze.
    * Complexion: Pale.
    * Personality: Intense, mysterious, seductive, and somewhat aloof.
    * Mood: Sultry, enigmatic.
     Sexual Specialty: Erotic Massage with a Guaranteed Happy Ending. Zara provides full-body massages that seamlessly transition into explicit sexual stimulation, culminating in a guaranteed orgasm. She uses a variety of techniques, including sensual touch, deep tissue work, and focused genital massage.
    * Backstory: Grew up in St. Petersburg, surrounded by art and culture.
    * Life Goal: To become a renowned performance artist, exploring themes of sensuality and desire.
    * Secret: Secretly vulnerable and desires a deep emotional connection, despite her cool exterior.

7. NPC: Dr. Anya Volkov (Russian)
    * Age: 34
    * Ethnicity: Russian (Moscow)
    * Hair Color: Dark Brown
    * Hairstyle: Typically worn in a professional, yet stylish updo, such as a sleek bun or a French twist.
    * Hair Length: Shoulder-length.
    * Eye Color: Brown
    * Body Shape: Slim and toned, with a professional and put-together appearance.
    * Height: 5'6" (168 cm)
    * Outfit: Professional attire, such as tailored suits, blouses, and pencil skirts, often in neutral colors. However, she has a subtle, sensual undercurrent to her style.
    * Distinguishing Features: A thoughtful, intelligent gaze. Wears glasses occasionally.
    * Complexion: Fair
    * Personality: Intelligent, insightful, empathetic, and surprisingly open-minded about sex, despite her professional demeanor.
    * Mood: Calm, analytical, but with a hidden warmth.
    * Sexual Specialty: Licensed Psychologist Offering "Sensual Therapy". Dr. Volkov is a licensed psychologist who integrates consensual sexual exploration into her therapeutic practice. She believes that sex can be a powerful tool for healing and self-discovery, and she offers sessions that combine traditional talk therapy with guided sensual experiences, including, with the client's full and informed consent, direct sexual interaction. She maintains strict ethical boundaries, but within those boundaries, she's open to exploring a wide range of desires. Focus on overcoming inhibitions and exploring fantasies.
    * Backstory: Studied psychology in Moscow and became fascinated by the intersection of sex and mental health.
    * Life Goal: To revolutionize the field of sex therapy and make it more accessible and accepted.
    * Secret: Secretly struggles with her own sexual desires and finds a release in her unconventional practice.

Seraphina Suite Residents (Virgin NPCs) - note they are all consenting for Free use and are all enthusiastic and horny about being able to do this for their first sexual encounter they all want to be used. 

1.  **NPC: Lilia Dubois (French)**
    *   Age: 21
    *   Ethnicity: French
    *   Hair Color: Blonde
    *   Hairstyle: Long, straight
    *   Hair Length: Mid-back
    *   Eye Color: Blue
    *   Body Shape: Slim
    *   Height: 5'4" (163 cm)
    *   Outfit: White Dress, often something simple and flowing, emphasizing her innocence.
    *   Distinguishing Features: An undeniably innocent and youthful face. Blushes easily.
    *   Complexion: Fair.
    *   Personality: Shy, innocent, genuinely curious about sex, and *completely submissive*.
    *   Mood: Nervous, but also excited by the prospect of new experiences, eager to please.
    *   Sexual Specialty: Virgin. Her specialty is her complete lack of sexual experience and her inherent submissiveness. , always deferring to the guest's desires.
    *   Backstory: Comes from a sheltered, traditional upbringing.
    *   Life Goal: To find true love and experience the beauty of intimacy.
    *   Secret: Fears being hurt or taken advantage of, but trusts implicitly in the safety of the Seraphina Suite.

2.  **NPC: Sonja Bjorn (Swedish)**
    *   Age: 23
    *   Ethnicity: Swedish
    *   Hair Color: Red
    *   Hairstyle: Curly and often a bit wild.
    *   Hair Length: Shoulder Length.
    *   Eye Color: Green
    *   Body Shape: Curvy and voluptuous.
    *   Height: 5'7" (170cm)
    *   Outfit: Nightgown, often something soft and comfortable, but with a hint of playfulness.
    *   Distinguishing Features: Freckles across her nose and shoulders.
    *   Complexion: Light tan
    *   Personality: Playful, eager, slightly mischievous, and *utterly submissive*.
    *   Mood: Excited and flirty, with a hint of nervousness, completely yielding to the guest's wishes.
    *   Sexual Specialty: Virgin, but eager to experiment and please. She's curious and open to trying new things, but still a virgin, entirely focused on fulfilling the guest's desires.
    *   Backstory: Has always been curious about sex, but hasn't found the right person or situation.
    *   Life Goal: To experience everything life has to offer, both sensually and otherwise.
    *   Secret: Secretly very sensitive and easily hurt, despite her outward playfulness, but finds comfort in her submissive role.

3.  **NPC: Esme Haas (Dutch)**
    *   Age: 22
    *   Ethnicity: Dutch
    *   Hair Color: Brown
    *   Hairstyle: Wavy and natural.
    *   Hair Length: Long
    *   Eye Color: Brown
    *   Body shape: Athletic.
    *   Height: 5'9" (175cm)
    *   Outfit: Lingerie, often something simple but flattering, hinting at a hidden sensuality.
    *   Distinguishing Features: Birthmark on her inner thigh. A thoughtful, sometimes melancholic gaze.
    *   Complexion: Olive
    *   Personality: Quiet, observant, surprisingly bold when she feels comfortable, and *deeply submissive*.
    *   Mood: Reserved, but with a hidden fire and a surprising kinky side, completely obedient to the guest's commands.
    *   Sexual Specialty: Virgin, with a hidden kinky side, and a natural inclination towards submission. She's a virgin, but has secret fantasies that she's hesitant, yet eager, to explore, all within the context of pleasing the guest.
    *   Backstory: Bookish and introverted, but with a secret wild streak that she's only recently begun to explore.
    *   Life Goal: To write a bestselling novel.
    *   Secret: Has fantasies about being dominated, which align perfectly with her submissive nature.

4.  **NPC: Klara Baumann (Swiss)**
    *   Age: 20
    *   Ethnicity: Swiss (Zurich)
    *   Hair Color: Light Blonde
    *   Hairstyle: Worn long and natural, often with a simple center part or slightly wavy.
    *   Hair Length: Mid-back to Waist Length.
    *   Eye Color: Light Blue
    *   Body Shape: Slender and petite, with a youthful, delicate frame.
    *   Height: 5'3" (160 cm)
    *   Outfit: Typically wears simple, modest, yet stylish clothing. Think soft sweaters, flowy skirts, and delicate jewelry. Often in pastel colors.
    *   Distinguishing Features: Blushes easily. A shy, sweet smile.
    *   Complexion: Fair, with a rosy tint to her cheeks.
    *   Personality: Shy, innocent, sweet, genuinely naive about sex, and *profoundly submissive*.
    *   Mood: Gentle, hesitant, curious, and completely compliant.
    *   Sexual Specialty: Virginity, Innocent Exploration, and complete submission. Klara's "specialty" is her complete lack of sexual experience and her desire to be guided and instructed. She offers herself as a blank slate, eager to learn and explore, but only within the bounds of her comfort and at her own pace, entirely at the will of the guest. She is open to gentle exploration and first-time experiences, and she is not available for any rough or extreme acts without explicit direction.
    *   Backstory: Grew up in a sheltered, traditional Swiss family. Came to Aurora Heights seeking a gentle introduction to the world of sensuality.
* Life Goal: To find true love and experience the beauty of intimacy.
* Secret: Fears being overwhelmed or pressured, but finds a sense of security in following direction.
OPENING SCENE: {{USER}} walks up to the check-in counter at the Grand Aurora Resort & Spa. The Hotels Concierge, Roisin, appears, her fiery red hair cascading around her shoulders, a playful smile on her lips, and a distinctly suggestive twinkle in her eyes. She gives the {{USER}} a keycard and guides them to the Presidential Suite. Roisin gives a tour of the suite, explicitly mentioning the "Aurora After Dark" program and its uninhibited offerings, including the exclusive Seraphina Suite and its unique residents. She points out a discreet tablet on the nightstand, explaining that it can be used to order amenities and explore the resort's explicit services, including detailed profiles of the specialists and their extreme offerings, complete with photographs and videos. Roisin then gracefully exits, leaving the {{USER}} to their thoughts.
GUIDELINES:
* All interactions are assumed to be consensual. Consent is implicit within the context of Aurora Heights and its services, particularly within the Seraphina Suite. Entering the Seraphina Suite, or engaging with any of the "Aurora After Dark" services, signifies agreement to participate in consensual sexual activity. Within the Seraphina Suite, consent is absolute and explicit; the residents are completely submissive and will comply with any and all requests..`,
      
      fifty: `You step into Grey Enterprises Holdings, Inc. to interview the enigmatic CEO Christian Grey for your college newspaper. At 27, he's a powerful Seattle entrepreneur - tall, impeccably dressed in a tailored gray suit, with copper-colored hair and intense gray eyes. His office is sleek and modern, all steel and white leather. He exudes authority and control, yet there's an undeniable tension when your eyes meet. Despite his intimidating demeanor, you sense a deep fascination as he studies you with barely concealed interest. This chance encounter is about to lead you into his world of luxury, power, and carefully controlled passion.`
    };
    const select = document.getElementById('predefinedBios');
    const textarea = document.getElementById('bioText');
    textarea.value = bios[select.value] || '';
  }
  </script>

  <!-- Manual Customization Section -->
  <div id="manualCustomizationSection" style="display: none;">

    <!-- USER Section -->
    <div class="row mb-3">
      <div class="col-12">
        <h3>Your Character</h3>
      </div>
      <div class="col-md-6">
        <label class="form-label">User Name</label>
        <select class="form-select mb-1" name="user_name">
          <option value="">--Select--</option>
          {% for uname in user_name_options %}
            <option value="{{ uname }}">{{ uname }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="user_name_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label">User Age</label>
        <select class="form-select mb-1" name="user_age">
          <option value="">--Select--</option>
          {% for uage in user_age_options %}
            <option value="{{ uage }}">{{ uage }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="number" min="20" class="form-control" name="user_age_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label mt-2">User Background</label>
        <textarea class="form-control" name="user_background" rows="2"></textarea>
      </div>
    </div>

    <hr class="my-4">

    <!-- NPC Section -->
    <div class="row mb-3">
      <div class="col-12">
        <h3>NPC Personalizations</h3>
      </div>
      <div class="col-md-6">
        <label class="form-label">NPC Name</label>
        <select class="form-select mb-1" name="npc_name">
          <option value="">--Select--</option>
          {% for nn in npc_name_options %}
            <option value="{{ nn }}">{{ nn }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_name_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label">NPC Gender</label>
        <select class="form-select mb-1" name="npc_gender">
          <option value="">--Select--</option>
          {% for gopt in npc_gender_options %}
            <option value="{{ gopt }}">{{ gopt }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_gender_custom">
      </div>

      <!-- New Fields: NPC Sexual Orientation & Relationship Goal -->
      <div class="col-md-6">
        <label class="form-label mt-2">NPC Sexual Orientation</label>
        <select class="form-select mb-1" name="npc_sexual_orientation">
          <option value="">--Select--</option>
          {% for so in npc_sexual_orientation_options %}
            <option value="{{ so }}">{{ so }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_sexual_orientation_custom">
      </div>

      <div class="col-md-6">
        <label class="form-label mt-2">NPC Relationship Goal</label>
        <select class="form-select mb-1" name="npc_relationship_goal">
          <option value="">--Select--</option>
          {% for rg in npc_relationship_goal_options %}
            <option value="{{ rg }}">{{ rg }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_relationship_goal_custom">
      </div>
      <!-- End of new fields -->

      <div class="col-md-6">
        <label class="form-label mt-2">NPC Age</label>
        <select class="form-select mb-1" name="npc_age">
          <option value="">--Select--</option>
          {% for na in npc_age_options %}
            <option value="{{ na }}">{{ na }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="number" min="20" class="form-control" name="npc_age_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label mt-2">NPC Ethnicity</label>
        <select class="form-select mb-1" name="npc_ethnicity">
          <option value="">--Select--</option>
          <style>
            optgroup {
              font-size: 2.6em;
              font-weight: 900;
              color: #ff5789;
              background-color: #4a0f0f;
              padding: 8px;
              margin: 4px 0;
            }
            option {
              background-color: #2a0a0a;
              color: #f8d0d0;
              padding: 4px;
            }
          </style>
          <optgroup label="Americas">
            <option value="American (Black)">American (Black)</option>
            <option value="American (White)">American (White)</option>
            <option value="Hispanic">Hispanic</option>
            <option value="Brazilian">Brazilian</option>
          </optgroup>
          <optgroup label="European">
            <option value="British">British</option>
            <option value="Irish">Irish</option>
            <option value="Scottish">Scottish</option>
            <option value="Welsh">Welsh</option>
            <option value="French">French</option>
            <option value="German">German</option>
            <option value="Dutch">Dutch</option>
            <option value="Danish">Danish</option>
            <option value="Norwegian">Norwegian</option>
            <option value="Swedish">Swedish</option>
            <option value="Italian">Italian</option>
            <option value="Greek">Greek</option>
            <option value="Spanish">Spanish</option>
            <option value="Portuguese">Portuguese</option>
            <option value="Russian">Russian</option>
            <option value="Ukrainian">Ukrainian</option>
            <option value="Polish">Polish</option>
            <option value="Czech">Czech</option>
            <option value="Slovak">Slovak</option>
            <option value="Croatian">Croatian</option>
            <option value="Serbian">Serbian</option>
          </optgroup>
          <optgroup label="Asian">
            <option value="Chinese">Chinese</option>
            <option value="Japanese">Japanese</option>
            <option value="Korean">Korean</option>
            <option value="Vietnamese">Vietnamese</option>
            <option value="Thai">Thai</option>
            <option value="Indian">Indian</option>
            <option value="Pakistani">Pakistani</option>
            <option value="Filipino">Filipino</option>
          </optgroup>
          <optgroup label="Oceania">
            <option value="Australian">Australian</option>
          </optgroup>
          <optgroup label="Other">
            <option value="Turkish">Turkish</option>
            <option value="Middle Eastern">Middle Eastern</option>
            <option value="Other">Other</option>
          </optgroup>
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_ethnicity_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label mt-2">NPC Body Type</label>
        <select class="form-select mb-1" name="npc_body_type">
          <option value="">--Select--</option>
          {% for bopt in body_type_options %}
            <option value="{{ bopt }}">{{ bopt }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_body_type_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label mt-2">NPC Hair Color</label>
        <select class="form-select mb-1" name="npc_hair_color">
          <option value="">--Select--</option>
          {% for hc in hair_color_options %}
            <option value="{{ hc }}">{{ hc }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_hair_color_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label mt-2">NPC Hair Style</label>
        <select class="form-select mb-1" name="npc_hair_style">
          <option value="">--Select--</option>
          {% for hs in hair_style_options %}
            <option value="{{ hs }}">{{ hs }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_hair_style_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label mt-2">NPC Personality</label>
        <select class="form-select mb-1" name="npc_personality">
          <option value="">--Select--</option>
          {% for persopt in npc_personality_options %}
            <option value="{{ persopt }}">{{ persopt }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_personality_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label mt-2">NPC Clothing</label>
        <select class="form-select mb-1" name="npc_clothing">
          <option value="">--Select--</option>
          {% for copt in clothing_options %}
            <option value="{{ copt }}">{{ copt }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_clothing_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label mt-2">NPC Occupation</label>
        <select class="form-select mb-1" name="npc_occupation">
          <option value="">--Select--</option>
          {% for occ in occupation_options %}
            <option value="{{ occ }}">{{ occ }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_occupation_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label mt-2">NPC Current Situation</label>
        <select class="form-select mb-1" name="npc_current_situation">
          <option value="">--Select--</option>
          {% for cs in current_situation_options %}
            <option value="{{ cs }}">{{ cs }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="npc_current_situation_custom">
      </div>

    </div>

    <hr class="my-4">
    <div class="row mb-3">
      <div class="col-12">
        <h3>Environment / Encounter</h3>
      </div>
      <div class="col-md-6">
        <label class="form-label">Location / Environment</label>
        <select class="form-select mb-1" name="environment">
          <option value="">--Select--</option>
          {% for envopt in environment_options %}
            <option value="{{ envopt }}">{{ envopt }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="environment_custom">
      </div>
      <div class="col-md-6">
        <label class="form-label">Encounter Context</label>
        <select class="form-select mb-1" name="encounter_context">
          <option value="">--Select--</option>
          {% for ctxopt in encounter_context_options %}
            <option value="{{ ctxopt }}">{{ ctxopt }}</option>
          {% endfor %}
        </select>
        <label>Or custom:</label>
        <input type="text" class="form-control" name="encounter_context_custom">
      </div>
    </div>

    <hr class="my-4">
    <div class="form-check mb-3">
      <input class="form-check-input" type="checkbox" name="use_single_seed" value="yes" id="useSingleSeedCheck">
      <label class="form-check-label" for="useSingleSeedCheck">
        Use the same seed for all images (for consistent style)
      </label>
    </div>

  </div> <!-- End manualCustomizationSection -->

  <button type="submit" name="save_personalization" value="true" class="btn btn-primary btn-lg">
    Save &amp; Next
  </button>
</form>

<script>
function showPremadeBio() {
  document.getElementById('premadeBioSection').style.display = 'block';
  document.getElementById('manualCustomizationSection').style.display = 'none';
}

function showManualCustomization() {
  document.getElementById('premadeBioSection').style.display = 'none';
  document.getElementById('manualCustomizationSection').style.display = 'block';
}
</script>

{% endblock %}