{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">Personalizations</h1>

<div class="mb-4">
  <h3>Choose Your Personalization Method</h3>
  <div class="row">
    <div class="col-md-6 mb-3">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Option 1: Premade Bio</h5>
          <p class="card-text">Enter a complete character biography and let the AI interpret the details.</p>
          <button type="button" class="btn btn-primary" onclick="showPremadeBio()">Use Premade Bio</button>
        </div>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Option 2: Manual Customization</h5>
          <p class="card-text">Customize individual traits and characteristics yourself.</p>
          <button type="button" class="btn btn-primary" onclick="showManualCustomization()">Use Manual Customization</button>
        </div>
      </div>
    </div>
  </div>
</div>

<form method="POST">
  <!-- Premade Bio Section -->
  <div id="premadeBioSection" style="display: none;">
    <div class="mb-4">
      <h3>Select Premade Bio</h3>
      <div class="alert alert-info">
        <small>Choose a predefined bio. The AI will extract all relevant details.</small>
      </div>
      <select class="form-select mb-3" id="predefinedBios">
        <option value="">--Select Predefined Bio--</option>
        <option value="athlete">The Athlete</option>
        <option value="executive">The Executive</option>
        <option value="artist">The Artist</option>
        <option value="chef">The Chef</option>
        <option value="fifty">Fifty Shades of Grey</option>
      </select>
    </div>
  </div>

  <script>
  </script>

  <!-- Manual Customization Section -->
  <div id="manualCustomizationSection" style="display: none;">

  <!-- USER Section -->
  <div class="row mb-3">
    <div class="col-12">
      <h3>Your Character</h3>
    </div>
    <div class="col-md-6">
      <label class="form-label">User Name</label>
      <select class="form-select mb-1" name="user_name">
        <option value="">--Select--</option>
        {% for uname in user_name_options %}
          <option value="{{ uname }}">{{ uname }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="user_name_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label">User Age</label>
      <select class="form-select mb-1" name="user_age">
        <option value="">--Select--</option>
        {% for uage in user_age_options %}
          <option value="{{ uage }}">{{ uage }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="number" min="20" class="form-control" name="user_age_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">User Background</label>
      <textarea class="form-control" name="user_background" rows="2"></textarea>
    </div>
  </div>

  <hr class="my-4">

  <!-- NPC Section -->
  <div class="row mb-3">
    <div class="col-12">
      <h3>NPC Personalizations</h3>
    </div>
    <div class="col-md-6">
      <label class="form-label">NPC Name</label>
      <select class="form-select mb-1" name="npc_name">
        <option value="">--Select--</option>
        {% for nn in npc_name_options %}
          <option value="{{ nn }}">{{ nn }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_name_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label">NPC Gender</label>
      <select class="form-select mb-1" name="npc_gender">
        <option value="">--Select--</option>
        {% for gopt in npc_gender_options %}
          <option value="{{ gopt }}">{{ gopt }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_gender_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">NPC Age</label>
      <select class="form-select mb-1" name="npc_age">
        <option value="">--Select--</option>
        {% for na in npc_age_options %}
          <option value="{{ na }}">{{ na }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="number" min="20" class="form-control" name="npc_age_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">NPC Ethnicity</label>
      <select class="form-select mb-1" name="npc_ethnicity">
        <option value="">--Select--</option>
        <style>
          optgroup {
            font-size: 2.6em;
            font-weight: 900;
            color: #ff5789;
            background-color: #4a0f0f;
            padding: 8px;
            margin: 4px 0;
          }
          option {
            background-color: #2a0a0a;
            color: #f8d0d0;
            padding: 4px;
          }
        </style>
        <optgroup label="Americas">
          <option value="American (Black)">American (Black)</option>
          <option value="American (White)">American (White)</option>
          <option value="Hispanic">Hispanic</option>
          <option value="Brazilian">Brazilian</option>
        </optgroup>
        <optgroup label="European">
          <option value="British">British</option>
          <option value="Irish">Irish</option>
          <option value="Scottish">Scottish</option>
          <option value="Welsh">Welsh</option>
          <option value="French">French</option>
          <option value="German">German</option>
          <option value="Dutch">Dutch</option>
          <option value="Danish">Danish</option>
          <option value="Norwegian">Norwegian</option>
          <option value="Swedish">Swedish</option>
          <option value="Italian">Italian</option>
          <option value="Greek">Greek</option>
          <option value="Spanish">Spanish</option>
          <option value="Portuguese">Portuguese</option>
          <option value="Russian">Russian</option>
          <option value="Ukrainian">Ukrainian</option>
          <option value="Polish">Polish</option>
          <option value="Czech">Czech</option>
          <option value="Slovak">Slovak</option>
          <option value="Croatian">Croatian</option>
          <option value="Serbian">Serbian</option>
        </optgroup>
        <optgroup label="Asian">
          <option value="Chinese">Chinese</option>
          <option value="Japanese">Japanese</option>
          <option value="Korean">Korean</option>
          <option value="Vietnamese">Vietnamese</option>
          <option value="Thai">Thai</option>
          <option value="Indian">Indian</option>
          <option value="Pakistani">Pakistani</option>
          <option value="Filipino">Filipino</option>
        </optgroup>
        <optgroup label="Oceania">
          <option value="Australian">Australian</option>
        </optgroup>
        <optgroup label="Other">
          <option value="Turkish">Turkish</option>
          <option value="Middle Eastern">Middle Eastern</option>
          <option value="Other">Other</option>
        </optgroup>
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_ethnicity_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">NPC Body Type</label>
      <select class="form-select mb-1" name="npc_body_type">
        <option value="">--Select--</option>
        {% for bopt in body_type_options %}
          <option value="{{ bopt }}">{{ bopt }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_body_type_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">NPC Hair Color</label>
      <select class="form-select mb-1" name="npc_hair_color">
        <option value="">--Select--</option>
        {% for hc in hair_color_options %}
          <option value="{{ hc }}">{{ hc }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_hair_color_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">NPC Hair Style</label>
      <select class="form-select mb-1" name="npc_hair_style">
        <option value="">--Select--</option>
        {% for hs in hair_style_options %}
          <option value="{{ hs }}">{{ hs }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_hair_style_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">NPC Personality</label>
      <select class="form-select mb-1" name="npc_personality">
        <option value="">--Select--</option>
        {% for persopt in npc_personality_options %}
          <option value="{{ persopt }}">{{ persopt }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_personality_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">NPC Clothing</label>
      <select class="form-select mb-1" name="npc_clothing">
        <option value="">--Select--</option>
        {% for copt in clothing_options %}
          <option value="{{ copt }}">{{ copt }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_clothing_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">NPC Occupation</label>
      <select class="form-select mb-1" name="npc_occupation">
        <option value="">--Select--</option>
        {% for occ in occupation_options %}
          <option value="{{ occ }}">{{ occ }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_occupation_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label mt-2">NPC Current Situation</label>
      <select class="form-select mb-1" name="npc_current_situation">
        <option value="">--Select--</option>
        {% for cs in current_situation_options %}
          <option value="{{ cs }}">{{ cs }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="npc_current_situation_custom">
    </div>

    </div>

  <hr class="my-4">
  <div class="row mb-3">
    <div class="col-12">
      <h3>Environment / Encounter</h3>
    </div>
    <div class="col-md-6">
      <label class="form-label">Location / Environment</label>
      <select class="form-select mb-1" name="environment">
        <option value="">--Select--</option>
        {% for envopt in environment_options %}
          <option value="{{ envopt }}">{{ envopt }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="environment_custom">
    </div>
    <div class="col-md-6">
      <label class="form-label">Encounter Context</label>
      <select class="form-select mb-1" name="encounter_context">
        <option value="">--Select--</option>
        {% for ctxopt in encounter_context_options %}
          <option value="{{ ctxopt }}">{{ ctxopt }}</option>
        {% endfor %}
      </select>
      <label>Or custom:</label>
      <input type="text" class="form-control" name="encounter_context_custom">
    </div>
  </div>

  <hr class="my-4">
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" name="use_single_seed" value="yes" id="useSingleSeedCheck">
    <label class="form-check-label" for="useSingleSeedCheck">
      Use the same seed for all images (for consistent style)
    </label>
  </div>

  </div> <!-- Close manualCustomizationSection -->

  <button type="submit" name="save_personalization" value="true" class="btn btn-primary btn-lg">
    Save &amp; Next
  </button>
</form>

<script>
function showPremadeBio() {
  document.getElementById('premadeBioSection').style.display = 'block';
  document.getElementById('manualCustomizationSection').style.display = 'none';
}

function showManualCustomization() {
  document.getElementById('premadeBioSection').style.display = 'none';
  document.getElementById('manualCustomizationSection').style.display = 'block';
}
</script>
{% endblock %}