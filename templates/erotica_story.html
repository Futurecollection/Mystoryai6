{% extends "base.html" %}

{% block content %}
<h1>Generated Erotica</h1>

<div class="p-3 mb-4" style="background-color: #4a0d0d; border: 1px solid #ff5789; color: #f8d0d0; white-space: pre-wrap;">
  {{ erotica_text }}
</div>

<div class="row mb-3">
  <div class="col-md-6">
    <form method="POST" action="{{ url_for('continue_erotica') }}" class="mb-2">
      <div class="mb-2">
        <label class="form-label">Additional Instructions (optional):</label>
        <textarea name="continue_prompt" class="form-control" rows="2" 
                  placeholder="E.g.: Make it more intense, focus on dialogue, etc."></textarea>
      </div>
      <input type="hidden" name="previous_text" value="{{ erotica_text }}">
      <button type="submit" class="btn btn-danger me-2">Continue Story</button>
    </form>
  </div>
  <div class="col-md-6">
    <form method="POST" action="{{ url_for('generate_erotica') }}" class="mb-2">
      {% if session.get('last_erotica_prompt') %}
      <div class="mb-2 p-2" style="background-color: #5a2e2e; border-radius: 5px;">
        <label class="form-label">Previous Prompt:</label>
        <div style="color: #f8d0d0;">{{ session.get('last_erotica_prompt') }}</div>
      </div>
      {% endif %}
      <div class="mb-2">
        <label class="form-label">Regenerate with Instructions:</label>
        <textarea name="erotica_prompt" class="form-control" rows="2" 
                  placeholder="E.g.: Make it more romantic, focus on emotions, etc."></textarea>
        <div class="form-check mt-2">
          <input class="form-check-input" type="checkbox" name="use_previous_prompt" id="usePreviousPrompt">
          <label class="form-check-label" for="usePreviousPrompt">
            Build on previous prompt
          </label>
        </div>
      </div>
      <button type="submit" class="btn btn-warning">Regenerate Story</button>
    </form>
  </div>
</div>

<a href="{{ url_for('full_story') }}" class="btn btn-secondary me-2">
  Back to Full Story
</a>
<a href="{{ url_for('interaction') }}" class="btn btn-primary">
  Back to Interaction
</a>
{% endblock %}