
{% extends "base.html" %}

{% block content %}
<h1 style="color: #ff9fa3;" class="mb-4">Generated Erotica</h1>

<div class="p-3 mb-4" style="background-color: #4a0d0d; border: 1px solid #ff5789; color: #f8d0d0; border-radius: 5px; white-space: pre-wrap;">
  {{ erotica_text }}
</div>

<div class="row mb-3">
  <div class="col-md-6">
    <div class="card mb-4" style="background-color: #4a0d0d; border: 1px solid #ff5789;">
      <div class="card-header" style="background-color: #5f1c1c; color: #f8d0d0;">
        <i class="bi bi-forward"></i> Continue Story
      </div>
      <div class="card-body">
        <form method="POST" action="{{ url_for('continue_erotica') }}" class="mb-2">
          <div class="mb-2">
            <label class="form-label" style="color: #f8d0d0;">Additional Instructions (optional):</label>
            <textarea name="continue_prompt" class="form-control" rows="2" 
                    style="background-color: #3b0b0b; color: #f8d0d0; border: 1px solid #6d1d1d;"
                    placeholder="E.g.: Make it more intense, focus on dialogue, etc."></textarea>
          </div>
          <input type="hidden" name="previous_text" value="{{ erotica_text }}">
          <button type="submit" class="btn" style="background-color: #ff5789; color: white;">
            <i class="bi bi-play"></i> Continue Story
          </button>
        </form>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card mb-4" style="background-color: #4a0d0d; border: 1px solid #ff5789;">
      <div class="card-header" style="background-color: #5f1c1c; color: #f8d0d0;">
        <i class="bi bi-arrow-repeat"></i> Regenerate Story
      </div>
      <div class="card-body">
        <form method="POST" action="{{ url_for('generate_erotica') }}" class="mb-2">
          {% if session.get('last_erotica_prompt') %}
          <div class="mb-2 p-2" style="background-color: #3b0b0b; border-radius: 5px; color: #f8d0d0;">
            <label class="form-label">Previous Prompt:</label>
            <div style="color: #f8d0d0;">{{ session.get('last_erotica_prompt') }}</div>
          </div>
          {% endif %}
          <div class="mb-2">
            <label class="form-label" style="color: #f8d0d0;">Regenerate with Instructions:</label>
            <textarea name="erotica_prompt" class="form-control" rows="2" 
                    style="background-color: #3b0b0b; color: #f8d0d0; border: 1px solid #6d1d1d;"
                    placeholder="E.g.: Make it more romantic, focus on emotions, etc."></textarea>
            <div class="form-check mt-2" style="color: #f8d0d0;">
              <input class="form-check-input" type="checkbox" name="use_previous_prompt" id="usePreviousPrompt">
              <label class="form-check-label" for="usePreviousPrompt">
                Build on previous prompt
              </label>
            </div>
          </div>
          <button type="submit" class="btn" style="background-color: #ff5789; color: white;">
            <i class="bi bi-arrow-clockwise"></i> Regenerate Story
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="d-flex gap-2">
  <a href="{{ url_for('full_story') }}" class="btn" style="background-color: #5f1c1c; color: #f8d0d0;">
    <i class="bi bi-book"></i> Back to Full Story
  </a>
  <a href="{{ url_for('interaction') }}" class="btn" style="background-color: #5f1c1c; color: #f8d0d0;">
    <i class="bi bi-arrow-left"></i> Back to Interaction
  </a>
</div>
{% endblock %}
